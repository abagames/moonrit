parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r},p.cache={};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"c8HW":[function(require,module,exports) {
var define;
var t;!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof t&&t.amd?t([],n):"object"==typeof exports?exports.gcc=n():e.gcc=n()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){GIFEncoder=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function n(){this.bin=[]}n.prototype.getData=function(){for(var t="",n=this.bin.length,r=0;r<n;r++)t+=e[this.bin[r]];return t},n.prototype.writeByte=function(t){this.bin.push(t)},n.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},n.prototype.writeBytes=function(t,e,n){for(var r=n||t.length,o=e||0;o<r;o++)this.writeByte(t[o])};var r,o,i,a,c,u,f,s,l,d={},p=null,y=-1,w=0,h=!1,g=[],m=7,v=-1,B=!1,b=!0,F=!1,A=10,E="Generated by jsgif (https://github.com/antimatter15/jsgif/)",j=(d.setDelay=function(t){w=Math.round(t/10)},d.setDispose=function(t){t>=0&&(v=t)},d.setRepeat=function(t){t>=0&&(y=t)},d.setTransparent=function(t){p=t},d.setComment=function(t){E=t},d.addFrame=function(t,e){if(null===t||!h||null===a)throw new Error("Please call start method before calling addFrame");var n=!0;try{e?t instanceof ImageData?(c=t.data,sizeset&&r==t.width&&o==t.height||C(t.width,t.height)):t instanceof Uint8ClampedArray?t.length==r*o*4?c=t:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(c=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,F||C(t.canvas.width,t.canvas.height)),N(),S(),b&&(T(),D(),y>=0&&M()),P(),""!==E&&I(),O(),b||D(),L(),b=!1}catch(t){n=!1}return n},d.download=function(t){if(null===a||0==B)console.log("Please call start method and add frames and call finish method before calling download");else{t=void 0!==t?t.endsWith(".gif")?t:t+".gif":"download.gif";var e=document.createElement("a");e.download=t,e.href=URL.createObjectURL(new Blob([new Uint8Array(a.bin)],{type:"image/gif"})),e.click()}},d.finish=function(){if(!h)return!1;var t=!0;h=!1;try{a.writeByte(59),B=!0}catch(e){t=!1}return t},function(){i=0,c=null,u=null,f=null,l=null,B=!1,b=!0}),C=(d.setFrameRate=function(t){15!=t&&(w=Math.round(100/t))},d.setQuality=function(t){t<1&&(t=1),A=t},d.setSize=function(t,e){h&&!b||((r=t)<1&&(r=320),(o=e)<1&&(o=240),F=!0)}),S=(d.start=function(){j();var t=!0;B=!1,a=new n;try{a.writeUTFBytes("GIF89a")}catch(e){t=!1}return h=t},d.cont=function(){return j(),B=!1,a=new n,h=!0},function(){var t=u.length,e=t/3;f=[];var n=new NeuQuant(u,t,A);l=n.process();for(var r=0,o=0;o<e;o++){var a=n.map(255&u[r++],255&u[r++],255&u[r++]);g[a]=!0,f[o]=a}u=null,s=8,m=7,null!==p&&(i=x(p))}),x=function(t){if(null===l)return-1;for(var e=(16711680&t)>>16,n=(65280&t)>>8,r=255&t,o=0,i=16777216,a=l.length,c=0;c<a;){var u=e-(255&l[c++]),f=n-(255&l[c++]),s=r-(255&l[c]),d=u*u+f*f+s*s,p=c/3;g[p]&&d<i&&(i=d,o=p),c++}return o},N=function(){var t=r,e=o;u=[];for(var n=c,i=0,a=0;a<e;a++)for(var f=0;f<t;f++){var s=a*t*4+4*f;u[i++]=n[s],u[i++]=n[s+1],u[i++]=n[s+2]}},P=function(){var t,e;a.writeByte(33),a.writeByte(249),a.writeByte(4),null===p?(t=0,e=0):(t=1,e=2),v>=0&&(e=7&v),e<<=2,a.writeByte(0|e|t),U(w),a.writeByte(i),a.writeByte(0)},I=function(){a.writeByte(33),a.writeByte(254),a.writeByte(E.length),a.writeUTFBytes(E),a.writeByte(0)},O=function(){a.writeByte(44),U(0),U(0),U(r),U(o),b?a.writeByte(0):a.writeByte(128|m)},T=function(){U(r),U(o),a.writeByte(240|m),a.writeByte(0),a.writeByte(0)},M=function(){a.writeByte(33),a.writeByte(255),a.writeByte(11),a.writeUTFBytes("NETSCAPE2.0"),a.writeByte(3),a.writeByte(1),U(y),a.writeByte(0)},D=function(){a.writeBytes(l);for(var t=768-l.length,e=0;e<t;e++)a.writeByte(0)},U=function(t){a.writeByte(255&t),a.writeByte(t>>8&255)},L=function(){new LZWEncoder(r,o,f,s).encode(a)};return d.stream=function(){return a},d.setProperties=function(t,e){h=t,b=e},d},t.exports=GIFEncoder,LZWEncoder=function(){var t,e,n,r,o,i,a,c,u,f,s,l,d={},p=[],y=[],w=0,h=!1,g=0,m=0,v=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],B=[],b=d.LZWEncoder=function(o,i,a,c){t=o,e=i,n=a,r=Math.max(2,c)},F=function(t,e){B[l++]=t,l>=254&&C(e)},A=function(t){E(5003),w=f+2,h=!0,N(f,t)},E=function(t){for(var e=0;e<t;++e)p[e]=-1},j=d.compress=function(t,e){var n,r,o,i,d,g;for(h=!1,c=S(a=u=t),s=1+(f=1<<t-1),w=f+2,l=0,i=x(),g=0,n=5003;n<65536;n*=2)++g;g=8-g,E(5003),N(f,e);t:for(;-1!=(o=x());)if(n=(o<<12)+i,p[r=o<<g^i]!=n){if(p[r]>=0){d=5003-r,0===r&&(d=1);do{if((r-=d)<0&&(r+=5003),p[r]==n){i=y[r];continue t}}while(p[r]>=0)}N(i,e),i=o,w<4096?(y[r]=w++,p[r]=n):A(e)}else i=y[r];N(i,e),N(s,e)},C=(d.encode=function(n){n.writeByte(r),o=t*e,i=0,j(r+1,n),n.writeByte(0)},function(t){l>0&&(t.writeByte(l),t.writeBytes(B,0,l),l=0)}),S=function(t){return(1<<t)-1},x=function(){return 0===o?-1:(--o,255&n[i++])},N=function(t,e){for(g&=v[m],m>0?g|=t<<m:g=t,m+=a;m>=8;)F(255&g,e),g>>=8,m-=8;if((w>c||h)&&(h?(c=S(a=u),h=!1):c=12==++a?4096:S(a)),t==s){for(;m>0;)F(255&g,e),g>>=8,m-=8;C(e)}};return b.apply(this,arguments),d},NeuQuant=function(){var t,e,n,r,o,i={},a=[],c=[],u=[],f=[],s=i.NeuQuant=function(t,i,a){var f,s;for(e=t,n=i,r=a,o=new Array(256),f=0;f<256;f++)o[f]=new Array(4),(s=o[f])[0]=s[1]=s[2]=(f<<12)/256,u[f]=256,c[f]=0},l=(i.map=function(t,e,n){var r,i,c,u,f,s,l;for(f=1e3,l=-1,i=(r=a[e])-1;r<256||i>=0;)r<256&&((c=(s=o[r])[1]-e)>=f?r=256:(r++,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<f&&((u=s[2]-n)<0&&(u=-u),(c+=u)<f&&(f=c,l=s[3])))),i>=0&&((c=e-(s=o[i])[1])>=f?i=-1:(i--,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<f&&((u=s[2]-n)<0&&(u=-u),(c+=u)<f&&(f=c,l=s[3]))));return l},i.process=function(){return function(){var o,i,a,c,u,s,l,w,h,g,m,v,B,b;for(n<1509&&(r=1),t=30+(r-1)/3,v=e,B=0,b=n,g=(m=n/(3*r))/100|0,w=1024,(l=(s=2048)>>6)<=1&&(l=0),o=0;o<l;o++)f[o]=w*(256*(l*l-o*o)/(l*l));for(h=n<1509?3:n%499!=0?1497:n%491!=0?1473:n%487!=0?1461:1509,o=0;o<m;)if(a=(255&v[B+0])<<4,c=(255&v[B+1])<<4,u=(255&v[B+2])<<4,i=y(a,c,u),p(w,i,a,c,u),0!==l&&d(l,i,a,c,u),(B+=h)>=b&&(B-=n),0===g&&(g=1),++o%g==0)for(w-=w/t,(l=(s-=s/30)>>6)<=1&&(l=0),i=0;i<l;i++)f[i]=w*(256*(l*l-i*i)/(l*l))}(),l(),function(){var t,e,n,r,i,c,u,f;for(u=0,f=0,t=0;t<256;t++){for(n=t,r=(i=o[t])[1],e=t+1;e<256;e++)(c=o[e])[1]<r&&(n=e,r=c[1]);if(c=o[n],t!=n&&(e=c[0],c[0]=i[0],i[0]=e,e=c[1],c[1]=i[1],i[1]=e,e=c[2],c[2]=i[2],i[2]=e,e=c[3],c[3]=i[3],i[3]=e),r!=u){for(a[u]=f+t>>1,e=u+1;e<r;e++)a[e]=t;u=r,f=t}}for(a[u]=f+255>>1,e=u+1;e<256;e++)a[e]=255}(),function(){for(var t=[],e=new Array(256),n=0;n<256;n++)e[o[n][3]]=n;for(var r=0,i=0;i<256;i++){var a=e[i];t[r++]=o[a][0],t[r++]=o[a][1],t[r++]=o[a][2]}return t}()},function(){var t;for(t=0;t<256;t++)o[t][0]>>=4,o[t][1]>>=4,o[t][2]>>=4,o[t][3]=t}),d=function(t,e,n,r,i){var a,c,u,s,l,d,p;for((u=e-t)<-1&&(u=-1),(s=e+t)>256&&(s=256),a=e+1,c=e-1,d=1;a<s||c>u;){if(l=f[d++],a<s){p=o[a++];try{p[0]-=l*(p[0]-n)/(1<<18),p[1]-=l*(p[1]-r)/(1<<18),p[2]-=l*(p[2]-i)/(1<<18)}catch(t){}}if(c>u){p=o[c--];try{p[0]-=l*(p[0]-n)/(1<<18),p[1]-=l*(p[1]-r)/(1<<18),p[2]-=l*(p[2]-i)/(1<<18)}catch(t){}}}},p=function(t,e,n,r,i){var a=o[e];a[0]-=t*(a[0]-n)/1024,a[1]-=t*(a[1]-r)/1024,a[2]-=t*(a[2]-i)/1024},y=function(t,e,n){var r,i,a,f,s,l,d,p,y,w;for(y=p=~(1<<31),d=l=-1,r=0;r<256;r++)(i=(w=o[r])[0]-t)<0&&(i=-i),(a=w[1]-e)<0&&(a=-a),i+=a,(a=w[2]-n)<0&&(a=-a),(i+=a)<p&&(p=i,l=r),(f=i-(c[r]>>12))<y&&(y=f,d=r),s=u[r]>>10,u[r]-=s,c[r]+=s<<10;return u[l]+=64,c[l]-=65536,d};return s.apply(this,arguments),i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(0);let o,i,a;e.options={scale:.5,durationSec:3,keyCode:67,capturingFps:20,appFps:60,isAppendingImgElement:!0,quality:10,downloadFileName:null};let c=0,u=0,f=new Image,s=!1;function l(t){u++;const n=e.options.appFps/e.options.capturingFps;u<n||(u-=n,i||function(t){s?i=[]:(o=e.options.durationSec*e.options.capturingFps,i=y(o,()=>d(t)),a=y(o,()=>!1)),document.addEventListener("keydown",t=>{t.keyCode==e.options.keyCode&&p()})}(t),s&&i.push(d(t)),i[c].drawImage(t,0,0),s||(a[c]=!0),c++,!s&&c>=o&&(c=0))}function d(t){const n=document.createElement("canvas");n.width=t.width*e.options.scale,n.height=t.height*e.options.scale;const r=n.getContext("2d");return r.scale(e.options.scale,e.options.scale),r}function p(){const t=new r;if(t.setRepeat(0),t.setDelay(1e3/e.options.capturingFps),t.setQuality(e.options.quality),t.start(),s)y(c-1,e=>{t.addFrame(i[e])});else{let e=c;y(o,()=>{a[e]&&t.addFrame(i[e]),++e>=o&&(e=0)})}if(t.finish(),null!=e.options.downloadFileName)return t.download(e.options.downloadFileName),null;const n=t.stream().getData(),u=document.createElement("img");return u.src="data:image/gif;base64,"+function(t){for(var e,n,r,o,i,a,c,u="",f=0,s=t.length,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";f<s;)o=(e=t.charCodeAt(f++))>>2,i=(3&e)<<4|(n=t.charCodeAt(f++))>>4,a=(15&n)<<2|(r=t.charCodeAt(f++))>>6,c=63&r,isNaN(n)?a=c=64:isNaN(r)&&(c=64),u=u+l.charAt(o)+l.charAt(i)+l.charAt(a)+l.charAt(c);return u}(n),e.options.isAppendingImgElement&&document.getElementsByTagName("body")[0].appendChild(u),u}function y(t,e){let n=[];for(let r=0;r<t;r++)n.push(e(r));return n}e.capture=l,e.captureSvg=function(t){const n=e.options.appFps/e.options.capturingFps;if(u+1<n)return void u++;const r=(new XMLSerializer).serializeToString(t);f.src="data:image/svg+xml;base64,"+btoa(r),l(f)},e.end=p,e.setOptions=function(t){for(let n in t)e.options[n]=t[n];s=e.options.durationSec<=0}}])});
},{}],"YCKg":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var t,o,s,r=e(require("gif-capture-canvas"));exports.size=512,exports.bloomScale=8;var a=!1;function n(e,n){t=n,null==exports.context?(exports.canvas=document.createElement("canvas"),exports.canvas.classList.add("centering"),exports.canvas.width=exports.canvas.height=exports.size,exports.context=exports.canvas.getContext("2d"),exports.bloomCanvas=document.createElement("canvas"),exports.bloomCanvas.classList.add("centering"),exports.bloomCanvas.width=exports.bloomCanvas.height=exports.size/exports.bloomScale,exports.bloomCanvas.style.opacity="0.7",exports.bloomContext=exports.bloomCanvas.getContext("2d"),exports.descriptionCanvas=document.createElement("canvas"),exports.descriptionCanvas.classList.add("topCenter"),exports.descriptionCanvas.width=256,exports.descriptionCanvas.height=27,exports.descriptionContext=exports.descriptionCanvas.getContext("2d"),document.body.appendChild(exports.canvas),document.body.appendChild(exports.bloomCanvas),document.body.appendChild(exports.descriptionCanvas),a&&(r.setOptions({scale:.5,capturingFps:30}),(o=document.createElement("canvas")).width=exports.size,o.height=exports.size/2,s=o.getContext("2d")),e(),d()):e()}exports.init=n;var c=1.5;function p(e,t,o,s,r,a){var n=Math.sqrt(a);exports.context.fillStyle="rgb(".concat(Math.floor(r.r*n),",").concat(Math.floor(r.g*n),",").concat(Math.floor(r.b*n),")"),exports.context.fillRect(e-o/2,t-o/2,o,s),exports.bloomContext.fillStyle="rgb(".concat(Math.floor(r.r*a*c),",").concat(Math.floor(r.g*a*c),",").concat(Math.floor(r.b*a*c),")");var p=o*a,l=s*a;exports.bloomContext.fillRect((e-p)/exports.bloomScale,(t-l)/exports.bloomScale,2*p/exports.bloomScale,2*l/exports.bloomScale)}function l(){exports.context.fillStyle="black",exports.context.fillRect(0,0,exports.size,exports.size),exports.bloomContext.clearRect(0,0,exports.size/exports.bloomScale,exports.size/exports.bloomScale)}function i(){s.fillStyle="black",s.fillRect(0,0,exports.size,exports.size/2),s.drawImage(exports.canvas,exports.size/4,0,exports.size/2,exports.size/2),s.drawImage(exports.bloomCanvas,exports.size/4,0,exports.size/2,exports.size/2),r.capture(o)}exports.fillRect=p;var x=0;function d(){requestAnimationFrame(d);var e=window.performance.now();e-x<1e3/60-5||(l(),t(),a&&i(),x=e)}
},{"gif-capture-canvas":"c8HW"}],"9p0f":[function(require,module,exports) {
"use strict";function t(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function r(t,r){for(var e=0;e<r.length;e++){var s=r[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function e(t,e,s){return e&&r(t.prototype,e),s&&r(t,s),t}var s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var e in t)Object.hasOwnProperty.call(t,e)&&(r[e]=t[e]);return r.default=t,r};Object.defineProperty(exports,"__esModule",{value:!0});var i=s(require("./view"));exports.size=i.size/17,exports.colors=[0,15277667,5025616,16771899,4149685,10233776,240116,15658734];var o=[0,.4,.7,1],h=.36,n=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};t(this,r),this.pos=e,this.colorIndex=0,this.brightnessIndex=0,this.color={r:0,g:0,b:0},this.targetColor={r:0,g:0,b:0},this.brightness=0,this.targetBrightness=0,this.width=exports.size,this.height=exports.size}return e(r,[{key:"setColor",value:function(t){this.colorIndex=t;var r=exports.colors[t];this.targetColor={r:(16711680&r)>>16,g:(65280&r)>>8,b:255&r}}},{key:"setBrightness",value:function(t){this.brightnessIndex=t,this.targetBrightness=o[t]}},{key:"update",value:function(){this.color.r+=(this.targetColor.r-this.color.r)*h,this.color.g+=(this.targetColor.g-this.color.g)*h,this.color.b+=(this.targetColor.b-this.color.b)*h,this.brightness+=(this.targetBrightness-this.brightness)*h,this.color.r+this.color.g+this.color.b<64||this.brightness<.1||i.fillRect(this.pos.x,this.pos.y,.5*this.width,.5*this.height,this.color,this.brightness)}}]),r}();exports.Led=n;
},{"./view":"YCKg"}],"i1w5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.tokenize=u,exports.fromMidi=O,exports.enharmonic=exports.simplify=exports.build=exports.from=exports.altToAcc=exports.stepToLetter=exports.oct=exports.chroma=exports.freqToMidi=exports.freq=exports.midiToFreq=exports.midi=exports.pc=exports.name=exports.props=exports.names=void 0;var r="C C# Db D D# Eb E F F# Gb G G# Ab A A# Bb B".split(" "),t=function(t){return"string"!=typeof t?r.slice():r.filter(function(r){var e=r[1]||" ";return-1!==t.indexOf(e)})};exports.names=t;var e=t(" #"),n=t(" b"),o=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function u(r){"string"!=typeof r&&(r="");var t=o.exec(r);return[t[1].toUpperCase(),t[2].replace(/x/g,"##"),t[3],t[4]]}var i=Object.freeze({pc:null,name:null,step:null,alt:null,oct:null,octStr:null,chroma:null,midi:null,freq:null}),l=[0,2,4,5,7,9,11],a=function(r){var t=u(r);if(""===t[0]||""!==t[3])return i;var e=t[0],n=t[1],o=t[2],a={letter:e,acc:n,octStr:o,pc:e+n,name:e+n+o,step:(e.charCodeAt(0)+3)%7,alt:"b"===n[0]?-n.length:n.length,oct:o.length?+o:null,chroma:0,midi:null,freq:null};return a.chroma=(l[a.step]+a.alt+120)%12,a.midi=null!==a.oct?l[a.step]+a.alt+12*(a.oct+1):null,a.freq=m(a.midi),Object.freeze(a)},p=function(r,t){return void 0===t&&(t={}),function(e){return t[e]||(t[e]=r(e))}},c=p(a);exports.props=c;var s=function(r){return c(r).name};exports.name=s;var f=function(r){return c(r).pc};exports.pc=f;var x=function(r){return r>=0&&r<=127},v=function(r){if("number"!=typeof r&&"string"!=typeof r)return null;var t=c(r).midi,e=t||0===t?t:+r;return x(e)?e:null};exports.midi=v;var m=function(r,t){return void 0===t&&(t=440),"number"==typeof r?Math.pow(2,(r-69)/12)*t:null};exports.midiToFreq=m;var d=function(r){return c(r).freq||m(r)};exports.freq=d;var h=Math.log(2),b=Math.log(440),g=function(r){var t=12*(Math.log(r)-b)/h+69;return Math.round(100*t)/100};exports.freqToMidi=g;var y=function(r){return c(r).chroma};exports.chroma=y;var M=function(r){return c(r).oct};exports.oct=M;var q="CDEFGAB",A=function(r){return q[r]};exports.stepToLetter=A;var T=function(r,t){return Array(t+1).join(r)},j=function(r,t){return"number"!=typeof r?"":t(r)},C=function(r){return j(r,function(r){return r<0?T("b",-r):T("#",r)})};exports.altToAcc=C;var F=function(r,t){void 0===r&&(r={}),void 0===t&&(t=null);var e=t?Object.assign({},c(t),r):r,n=e.step,o=e.alt,u=e.oct;if("number"!=typeof n)return null;var i=A(n);if(!i)return null;var l=i+C(o);return u||0===u?l+u:l};exports.from=F;var G=F;function O(r,t){return void 0===t&&(t=!1),r=Math.round(r),(!0===t?e:n)[r%12]+(Math.floor(r/12)-1)}exports.build=G;var D=function(r,t){void 0===t&&(t=!0);var e=c(r),n=e.alt,o=e.chroma,u=e.midi;if(null===o)return null;var i=!1===t?n<0:n>0;return null===u?f(O(o,i)):O(u,i)};exports.simplify=D;var z=function(r){return D(r,!1)};exports.enharmonic=z;
},{}],"USq1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=e,exports.rotate=o,exports.sort=c,exports.unique=a,exports.permutations=exports.shuffle=exports.compact=void 0;var r=require("tonal-note");function t(r,t){for(var n=[];t--;n[t]=t+r);return n}function n(r,t){for(var n=[];t--;n[t]=r-t);return n}function e(r,e){return null===r||null===e?[]:r<e?t(r,e-r+1):n(r,r-e+1)}function o(r,t){var n=t.length,e=(r%n+n)%n;return t.slice(e,n).concat(t.slice(0,e))}var u=function(r){return r.filter(function(r){return 0===r||r})};exports.compact=u;var i=function(t){var n=(0,r.props)(t).midi;return null!==n?n:(0,r.props)(t+"-100").midi};function c(t){return u(t.map(r.name)).sort(function(r,t){return i(r)>i(t)})}function a(r){return c(r).filter(function(r,t,n){return 0===t||r!==n[t-1]})}var s=function(r,t){var n,e;void 0===t&&(t=Math.random);for(var o=r.length;o;)n=t()*o--|0,e=r[o],r[o]=r[n],r[n]=e;return r};exports.shuffle=s;var f=function(r){return 0===r.length?[[]]:f(r.slice(1)).reduce(function(t,n){return t.concat(r.map(function(t,e){var o=n.slice();return o.splice(e,0,r[0]),o}))},[])};exports.permutations=f;
},{"tonal-note":"i1w5"}],"79Yp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.props=d,exports.fromSemitones=exports.invert=exports.simplify=exports.build=exports.ic=exports.chroma=exports.semitones=exports.name=exports.num=exports.altToQ=exports.qToAlt=exports.tokenize=exports.names=void 0;var t="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})",e="(AA|A|P|M|m|d|dd)([-+]?\\d+)",r=new RegExp("^"+t+"|"+e+"$"),n=[0,2,4,5,7,9,11],o="PMMPPMM",u=[0,1,2,3,4,5,6,5,4,3,2,1],s="1P 2m 2M 3m 3M 4P 5P 6m 6M 7m 7M 8P".split(" "),l=function(t){return"string"!=typeof t?s.slice():s.filter(function(e){return-1!==t.indexOf(e[1])})};exports.names=l;var i=function(t){var e=r.exec(""+t);return null===e?null:e[1]?[e[1],e[2]]:[e[4],e[3]]};exports.tokenize=i;var a=Object.freeze({name:null,num:null,q:null,step:null,alt:null,dir:null,type:null,simple:null,semitones:null,chroma:null,oct:null}),p=function(t,e){return Array(Math.abs(e)+1).join(t)},m=function(t,e){return"M"===e&&"M"===t?0:"P"===e&&"P"===t?0:"m"===e&&"M"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?"P"===t?-e.length:-e.length-1:null};exports.qToAlt=m;var c=function(t,e){return 0===e?"M"===t?"M":"P":-1===e&&"M"===t?"m":e>0?p("A",e):e<0?p("d","P"===t?e:e+1):null};exports.altToQ=c;var f=function(t){return(Math.abs(t)-1)%7},v=function(t){var e=i(t);if(null===e)return a;var r={num:0,q:"d",name:"",type:"M",step:0,dir:-1,simple:1,alt:0,oct:0,semitones:0,chroma:0,ic:0};return r.num=+e[0],r.q=e[1],r.step=f(r.num),r.type=o[r.step],"M"===r.type&&"P"===r.q?a:(r.name=""+r.num+r.q,r.dir=r.num<0?-1:1,r.simple=8===r.num||-8===r.num?r.num:r.dir*(r.step+1),r.alt=m(r.type,r.q),r.oct=Math.floor((Math.abs(r.num)-1)/7),r.semitones=r.dir*(n[r.step]+r.alt+12*r.oct),r.chroma=(r.dir*(n[r.step]+r.alt)%12+12)%12,Object.freeze(r))},x={};function d(t){return"string"!=typeof t?a:x[t]||(x[t]=v(t))}var M=function(t){return d(t).num};exports.num=M;var P=function(t){return d(t).name};exports.name=P;var h=function(t){return d(t).semitones};exports.semitones=h;var y=function(t){return d(t).chroma};exports.chroma=y;var b=function(t){return"string"==typeof t&&(t=d(t).chroma),"number"==typeof t?u[t%12]:null};exports.ic=b;var q=function(t){var e=void 0===t?{}:t,r=e.num,n=e.step,u=e.alt,s=e.oct,l=void 0===s?1:s,i=e.dir;if(void 0!==n&&(r=n+1+7*l),void 0===r)return null;if("number"!=typeof u)return null;var a="number"!=typeof i?"":i<0?"-":"",p=o[f(r)];return a+r+c(p,u)};exports.build=q;var A=function(t){var e=d(t);if(e===a)return null;var r=e;return r.simple+r.q};exports.simplify=A;var g=function(t){var e=d(t);if(e===a)return null;var r=e,n=(7-r.step)%7,o="P"===r.type?-r.alt:-(r.alt+1);return q({step:n,alt:o,oct:r.oct,dir:r.dir})};exports.invert=g;var j=[1,2,2,3,3,4,5,5,6,6,7,7],z="P m M m M P d P m M m M".split(" "),O=function(t){var e=t<0?-1:1,r=Math.abs(t),n=r%12,o=Math.floor(r/12);return e*(j[n]+7*o)+z[n]};exports.fromSemitones=O;
},{}],"GSA/":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.transpose=v,exports.trFifths=h,exports.fifths=d,exports.transposeBy=g,exports.addIntervals=b,exports.add=M,exports.subtract=q,exports.interval=y,exports.semitones=_;var n=require("tonal-note"),r=require("tonal-interval"),t=[0,2,4,-1,1,3,5],u=function(n){return Math.floor(7*n/12)},e=t.map(u),l=function(n){var r=n.step,u=n.alt,l=n.oct,o=n.dir;void 0===o&&(o=1);var i=t[r]+7*u;return null===l?[o*i]:[o*i,o*(l-e[r]-4*u)]},o=[3,0,4,1,5,2,6];function i(n){var r=(n+1)%7;return r<0?7+r:r}var f=function(n,r,t){var u=o[i(n)],l=Math.floor((n+1)/7);return void 0===r?{step:u,alt:l,dir:t}:{step:u,alt:l,oct:r+4*l+e[u],dir:t}},a=function(n,r){return void 0===r&&(r={}),function(t){return r[t]||(r[t]=n(t))}},c=function(n){return a(function(r){var t=n(r);return null===t.name?null:l(t)})},s=c(n.props),p=c(r.props);function v(r,t){if(1===arguments.length)return function(n){return v(r,n)};var u=s(r),e=p(t);if(null===u||null===e)return null;var l=1===u.length?[u[0]+e[0]]:[u[0]+e[0],u[1]+e[1]];return(0,n.build)(f(l[0],l[1]))}function h(r,t){if(1===arguments.length)return function(n){return h(r,n)};var u=s(r);return null===u?null:(0,n.build)(f(u[0]+t))}function d(n,r){if(1===arguments.length)return function(r){return d(n,r)};var t=s(n),u=s(r);return null===u||null===t?null:u[0]-t[0]}function g(n,r){return 1===arguments.length?function(r){return v(r,n)}:v(r,n)}var m=function(n){return 7*n[0]+12*n[1]<0},x=function(n){return m(n)?f(-n[0],-n[1],-1):f(n[0],n[1],1)};function b(n,t,u){var e=p(n),l=p(t);if(null===e||null===l)return null;var o=[e[0]+u*l[0],e[1]+u*l[1]];return(0,r.build)(x(o))}function M(n,r){return 1===arguments.length?function(r){return M(n,r)}:b(n,r,1)}function q(n,r){return 1===arguments.length?function(r){return M(n,r)}:b(n,r,-1)}function y(n,t){if(1===arguments.length)return function(r){return y(n,r)};var u=s(n),e=s(t);if(null===u||null===e||u.length!==e.length)return null;var l=1===u.length?[e[0]-u[0],-Math.floor(7*(e[0]-u[0])/12)]:[e[0]-u[0],e[1]-u[1]];return(0,r.build)(x(l))}function _(r,t){if(1===arguments.length)return function(n){return _(r,n)};var u=(0,n.props)(r),e=(0,n.props)(t);return null!==u.midi&&null!==e.midi?e.midi-u.midi:null!==u.chroma&&null!==e.chroma?(e.chroma-u.chroma+12)%12:null}
},{"tonal-note":"i1w5","tonal-interval":"79Yp"}],"gl6o":[function(require,module,exports) {
module.exports={chromatic:["1P 2m 2M 3m 3M 4P 4A 5P 6m 6M 7m 7M"],lydian:["1P 2M 3M 4A 5P 6M 7M"],major:["1P 2M 3M 4P 5P 6M 7M",["ionian"]],mixolydian:["1P 2M 3M 4P 5P 6M 7m",["dominant"]],dorian:["1P 2M 3m 4P 5P 6M 7m"],aeolian:["1P 2M 3m 4P 5P 6m 7m",["minor"]],phrygian:["1P 2m 3m 4P 5P 6m 7m"],locrian:["1P 2m 3m 4P 5d 6m 7m"],"melodic minor":["1P 2M 3m 4P 5P 6M 7M"],"melodic minor second mode":["1P 2m 3m 4P 5P 6M 7m"],"lydian augmented":["1P 2M 3M 4A 5A 6M 7M"],"lydian dominant":["1P 2M 3M 4A 5P 6M 7m",["lydian b7"]],"melodic minor fifth mode":["1P 2M 3M 4P 5P 6m 7m",["hindu","mixolydian b6M"]],"locrian #2":["1P 2M 3m 4P 5d 6m 7m",["half-diminished"]],altered:["1P 2m 3m 3M 5d 6m 7m",["super locrian","diminished whole tone","pomeroy"]],"harmonic minor":["1P 2M 3m 4P 5P 6m 7M"],"phrygian dominant":["1P 2m 3M 4P 5P 6m 7m",["spanish","phrygian major"]],"half-whole diminished":["1P 2m 3m 3M 4A 5P 6M 7m",["dominant diminished"]],diminished:["1P 2M 3m 4P 5d 6m 6M 7M",["whole-half diminished"]],"major pentatonic":["1P 2M 3M 5P 6M",["pentatonic"]],"lydian pentatonic":["1P 3M 4A 5P 7M",["chinese"]],"mixolydian pentatonic":["1P 3M 4P 5P 7m",["indian"]],"locrian pentatonic":["1P 3m 4P 5d 7m",["minor seven flat five pentatonic"]],"minor pentatonic":["1P 3m 4P 5P 7m"],"minor six pentatonic":["1P 3m 4P 5P 6M"],"minor hexatonic":["1P 2M 3m 4P 5P 7M"],"flat three pentatonic":["1P 2M 3m 5P 6M",["kumoi"]],"flat six pentatonic":["1P 2M 3M 5P 6m"],"major flat two pentatonic":["1P 2m 3M 5P 6M"],"whole tone pentatonic":["1P 3M 5d 6m 7m"],"ionian pentatonic":["1P 3M 4P 5P 7M"],"lydian #5P pentatonic":["1P 3M 4A 5A 7M"],"lydian dominant pentatonic":["1P 3M 4A 5P 7m"],"minor #7M pentatonic":["1P 3m 4P 5P 7M"],"super locrian pentatonic":["1P 3m 4d 5d 7m"],"in-sen":["1P 2m 4P 5P 7m"],iwato:["1P 2m 4P 5d 7m"],hirajoshi:["1P 2M 3m 5P 6m"],kumoijoshi:["1P 2m 4P 5P 6m"],pelog:["1P 2m 3m 5P 6m"],"vietnamese 1":["1P 3m 4P 5P 6m"],"vietnamese 2":["1P 3m 4P 5P 7m"],prometheus:["1P 2M 3M 4A 6M 7m"],"prometheus neopolitan":["1P 2m 3M 4A 6M 7m"],ritusen:["1P 2M 4P 5P 6M"],scriabin:["1P 2m 3M 5P 6M"],piongio:["1P 2M 4P 5P 6M 7m"],"major blues":["1P 2M 3m 3M 5P 6M"],"minor blues":["1P 3m 4P 5d 5P 7m",["blues"]],"composite blues":["1P 2M 3m 3M 4P 5d 5P 6M 7m"],augmented:["1P 2A 3M 5P 5A 7M"],"augmented heptatonic":["1P 2A 3M 4P 5P 5A 7M"],"dorian #4":["1P 2M 3m 4A 5P 6M 7m"],"lydian diminished":["1P 2M 3m 4A 5P 6M 7M"],"whole tone":["1P 2M 3M 4A 5A 7m"],"leading whole tone":["1P 2M 3M 4A 5A 7m 7M"],"lydian minor":["1P 2M 3M 4A 5P 6m 7m"],"locrian major":["1P 2M 3M 4P 5d 6m 7m",["arabian"]],neopolitan:["1P 2m 3m 4P 5P 6m 7M"],"neopolitan minor":["1P 2m 3m 4P 5P 6m 7M"],"neopolitan major":["1P 2m 3m 4P 5P 6M 7M",["dorian b2"]],"neopolitan major pentatonic":["1P 3M 4P 5d 7m"],"romanian minor":["1P 2M 3m 5d 5P 6M 7m"],"double harmonic lydian":["1P 2m 3M 4A 5P 6m 7M"],"harmonic major":["1P 2M 3M 4P 5P 6m 7M"],"double harmonic major":["1P 2m 3M 4P 5P 6m 7M",["gypsy"]],egyptian:["1P 2M 4P 5P 7m"],"hungarian minor":["1P 2M 3m 4A 5P 6m 7M"],"hungarian major":["1P 2A 3M 4A 5P 6M 7m"],oriental:["1P 2m 3M 4P 5d 6M 7m"],"spanish heptatonic":["1P 2m 3m 3M 4P 5P 6m 7m"],flamenco:["1P 2m 3m 3M 4A 5P 7m"],balinese:["1P 2m 3m 4P 5P 6m 7M"],"todi raga":["1P 2m 3m 4A 5P 6m 7M"],"malkos raga":["1P 3m 4P 6m 7m"],"kafi raga":["1P 3m 3M 4P 5P 6M 7m 7M"],"purvi raga":["1P 2m 3M 4P 4A 5P 6m 7M"],persian:["1P 2m 3M 4P 5d 6m 7M"],bebop:["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop dominant":["1P 2M 3M 4P 5P 6M 7m 7M"],"bebop minor":["1P 2M 3m 3M 4P 5P 6M 7m"],"bebop major":["1P 2M 3M 4P 5P 5A 6M 7M"],"bebop locrian":["1P 2m 3m 4P 5d 5P 6m 7m"],"minor bebop":["1P 2M 3m 4P 5P 6m 7m 7M"],"mystery #1":["1P 2m 3M 5d 6m 7m"],enigmatic:["1P 2m 3M 5d 6m 7m 7M"],"minor six diminished":["1P 2M 3m 4P 5P 6m 6M 7M"],"ionian augmented":["1P 2M 3M 4P 5A 6M 7M"],"lydian #9":["1P 2m 3M 4A 5P 6M 7M"],ichikosucho:["1P 2M 3M 4P 5d 5P 6M 7M"],"six tone symmetric":["1P 2m 3M 4P 5A 6M"]};
},{}],"JhlX":[function(require,module,exports) {
module.exports={4:["1P 4P 7m 10m",["quartal"]],64:["5P 8P 10M"],5:["1P 5P"],M:["1P 3M 5P",["Major",""]],"M#5":["1P 3M 5A",["augmented","maj#5","Maj#5","+","aug"]],"M#5add9":["1P 3M 5A 9M",["+add9"]],M13:["1P 3M 5P 7M 9M 13M",["maj13","Maj13"]],"M13#11":["1P 3M 5P 7M 9M 11A 13M",["maj13#11","Maj13#11","M13+4","M13#4"]],M6:["1P 3M 5P 13M",["6"]],"M6#11":["1P 3M 5P 6M 11A",["M6b5","6#11","6b5"]],M69:["1P 3M 5P 6M 9M",["69"]],"M69#11":["1P 3M 5P 6M 9M 11A"],"M7#11":["1P 3M 5P 7M 11A",["maj7#11","Maj7#11","M7+4","M7#4"]],"M7#5":["1P 3M 5A 7M",["maj7#5","Maj7#5","maj9#5","M7+"]],"M7#5sus4":["1P 4P 5A 7M"],"M7#9#11":["1P 3M 5P 7M 9A 11A"],M7add13:["1P 3M 5P 6M 7M 9M"],M7b5:["1P 3M 5d 7M"],M7b6:["1P 3M 6m 7M"],M7b9:["1P 3M 5P 7M 9m"],M7sus4:["1P 4P 5P 7M"],M9:["1P 3M 5P 7M 9M",["maj9","Maj9"]],"M9#11":["1P 3M 5P 7M 9M 11A",["maj9#11","Maj9#11","M9+4","M9#4"]],"M9#5":["1P 3M 5A 7M 9M",["Maj9#5"]],"M9#5sus4":["1P 4P 5A 7M 9M"],M9b5:["1P 3M 5d 7M 9M"],M9sus4:["1P 4P 5P 7M 9M"],Madd9:["1P 3M 5P 9M",["2","add9","add2"]],Maj7:["1P 3M 5P 7M",["maj7","M7"]],Mb5:["1P 3M 5d"],Mb6:["1P 3M 13m"],Msus2:["1P 2M 5P",["add9no3","sus2"]],Msus4:["1P 4P 5P",["sus","sus4"]],Maddb9:["1P 3M 5P 9m"],7:["1P 3M 5P 7m",["Dominant","Dom"]],9:["1P 3M 5P 7m 9M",["79"]],11:["1P 5P 7m 9M 11P"],13:["1P 3M 5P 7m 9M 13M",["13_"]],"11b9":["1P 5P 7m 9m 11P"],"13#11":["1P 3M 5P 7m 9M 11A 13M",["13+4","13#4"]],"13#9":["1P 3M 5P 7m 9A 13M",["13#9_"]],"13#9#11":["1P 3M 5P 7m 9A 11A 13M"],"13b5":["1P 3M 5d 6M 7m 9M"],"13b9":["1P 3M 5P 7m 9m 13M"],"13b9#11":["1P 3M 5P 7m 9m 11A 13M"],"13no5":["1P 3M 7m 9M 13M"],"13sus4":["1P 4P 5P 7m 9M 13M",["13sus"]],"69#11":["1P 3M 5P 6M 9M 11A"],"7#11":["1P 3M 5P 7m 11A",["7+4","7#4","7#11_","7#4_"]],"7#11b13":["1P 3M 5P 7m 11A 13m",["7b5b13"]],"7#5":["1P 3M 5A 7m",["+7","7aug","aug7"]],"7#5#9":["1P 3M 5A 7m 9A",["7alt","7#5#9_","7#9b13_"]],"7#5b9":["1P 3M 5A 7m 9m"],"7#5b9#11":["1P 3M 5A 7m 9m 11A"],"7#5sus4":["1P 4P 5A 7m"],"7#9":["1P 3M 5P 7m 9A",["7#9_"]],"7#9#11":["1P 3M 5P 7m 9A 11A",["7b5#9"]],"7#9#11b13":["1P 3M 5P 7m 9A 11A 13m"],"7#9b13":["1P 3M 5P 7m 9A 13m"],"7add6":["1P 3M 5P 7m 13M",["67","7add13"]],"7b13":["1P 3M 7m 13m"],"7b5":["1P 3M 5d 7m"],"7b6":["1P 3M 5P 6m 7m"],"7b9":["1P 3M 5P 7m 9m"],"7b9#11":["1P 3M 5P 7m 9m 11A",["7b5b9"]],"7b9#9":["1P 3M 5P 7m 9m 9A"],"7b9b13":["1P 3M 5P 7m 9m 13m"],"7b9b13#11":["1P 3M 5P 7m 9m 11A 13m",["7b9#11b13","7b5b9b13"]],"7no5":["1P 3M 7m"],"7sus4":["1P 4P 5P 7m",["7sus"]],"7sus4b9":["1P 4P 5P 7m 9m",["susb9","7susb9","7b9sus","7b9sus4","phryg"]],"7sus4b9b13":["1P 4P 5P 7m 9m 13m",["7b9b13sus4"]],"9#11":["1P 3M 5P 7m 9M 11A",["9+4","9#4","9#11_","9#4_"]],"9#11b13":["1P 3M 5P 7m 9M 11A 13m",["9b5b13"]],"9#5":["1P 3M 5A 7m 9M",["9+"]],"9#5#11":["1P 3M 5A 7m 9M 11A"],"9b13":["1P 3M 7m 9M 13m"],"9b5":["1P 3M 5d 7m 9M"],"9no5":["1P 3M 7m 9M"],"9sus4":["1P 4P 5P 7m 9M",["9sus"]],m:["1P 3m 5P"],"m#5":["1P 3m 5A",["m+","mb6"]],m11:["1P 3m 5P 7m 9M 11P",["_11"]],"m11A 5":["1P 3m 6m 7m 9M 11P"],m11b5:["1P 3m 7m 12d 2M 4P",["h11","_11b5"]],m13:["1P 3m 5P 7m 9M 11P 13M",["_13"]],m6:["1P 3m 4P 5P 13M",["_6"]],m69:["1P 3m 5P 6M 9M",["_69"]],m7:["1P 3m 5P 7m",["minor7","_","_7"]],"m7#5":["1P 3m 6m 7m"],m7add11:["1P 3m 5P 7m 11P",["m7add4"]],m7b5:["1P 3m 5d 7m",["half-diminished","h7","_7b5"]],m9:["1P 3m 5P 7m 9M",["_9"]],"m9#5":["1P 3m 6m 7m 9M"],m9b5:["1P 3m 7m 12d 2M",["h9","-9b5"]],mMaj7:["1P 3m 5P 7M",["mM7","_M7"]],mMaj7b6:["1P 3m 5P 6m 7M",["mM7b6"]],mM9:["1P 3m 5P 7M 9M",["mMaj9","-M9"]],mM9b6:["1P 3m 5P 6m 7M 9M",["mMaj9b6"]],mb6M7:["1P 3m 6m 7M"],mb6b9:["1P 3m 6m 9m"],o:["1P 3m 5d",["mb5","dim"]],o7:["1P 3m 5d 13M",["diminished","m6b5","dim7"]],o7M7:["1P 3m 5d 6M 7M"],oM7:["1P 3m 5d 7M"],sus24:["1P 2M 4P 5P",["sus4add9"]],"+add#9":["1P 3M 5A 9A"],madd4:["1P 3m 4P 5P"],madd9:["1P 3m 5P 9M"]};
},{}],"hZrt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.chroma=i,exports.chromas=a,exports.modes=f,exports.isChroma=l,exports.intervals=m,exports.isEqual=h,exports.isSubsetOf=x,exports.isSupersetOf=v,exports.includes=g,exports.filter=d;var r=require("tonal-note"),n=require("tonal-interval"),t=require("tonal-array"),e=function(t){return(0,r.chroma)(t)||(0,n.chroma)(t)||0},u=function(r){return parseInt(i(r),2)},o=function(r){return r.replace(/0/g,"").length};function i(r){if(l(r))return r;if(!Array.isArray(r))return"";var n=[0,0,0,0,0,0,0,0,0,0,0,0];return r.map(e).forEach(function(r){n[r]=1}),n.join("")}var c=null;function a(r){return c=c||(0,t.range)(2048,4095).map(function(r){return r.toString(2)}),"number"==typeof r?c.filter(function(n){return o(n)===r}):c.slice()}function f(r,n){n=!1!==n;var e=i(r).split("");return(0,t.compact)(e.map(function(r,u){var o=(0,t.rotate)(u,e);return n&&"0"===o[0]?null:o.join("")}))}var s=/^[01]{12}$/;function l(r){return s.test(r)}var p="1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M".split(" ");function m(r){return l(r)?(0,t.compact)(r.split("").map(function(r,n){return"1"===r?p[n]:null})):[]}function h(r,n){return 1===arguments.length?function(n){return h(r,n)}:i(r)===i(n)}function x(r,n){return arguments.length>1?x(r)(n):(r=u(r),function(n){return(n=u(n))!==r&&(n&r)===n})}function v(r,n){return arguments.length>1?v(r)(n):(r=u(r),function(n){return(n=u(n))!==r&&(n|r)===n})}function g(r,n){return arguments.length>1?g(r)(n):(r=i(r),function(n){return"1"===r[e(n)]})}function d(r,n){return 1===arguments.length?function(n){return d(r,n)}:n.filter(g(r))}
},{"tonal-note":"i1w5","tonal-interval":"79Yp","tonal-array":"USq1"}],"t9lf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pcset=exports.chord=exports.scale=exports.combine=exports.dictionary=void 0;var e=n(require("./data/scales.json")),r=n(require("./data/chords.json")),t=require("tonal-pcset");function n(e){return e&&e.__esModule?e:{default:e}}var o=function(e){var r=Object.keys(e).sort(),n=[],o=[],s=function(e,r,t){n[e]=r,o[t]=o[t]||[],o[t].push(e)};r.forEach(function(r){var n=e[r][0].split(" "),o=e[r][1],c=(0,t.chroma)(n);s(r,n,c),o&&o.forEach(function(e){return s(e,n,c)})});var c=Object.keys(n).sort(),a=function(e){return n[e]};return a.names=function(e){return"string"==typeof e?(o[e]||[]).slice():(!0===e?c:r).slice()},a};exports.dictionary=o;var s=function(e,r){var t=function(t){return e(t)||r(t)};return t.names=function(t){return e.names(t).concat(r.names(t))},t};exports.combine=s;var c=o(e.default);exports.scale=c;var a=o(r.default);exports.chord=a;var u=s(c,a);exports.pcset=u;
},{"./data/scales.json":"gl6o","./data/chords.json":"JhlX","tonal-pcset":"hZrt"}],"Xkhp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notes=p,exports.exists=f,exports.tokenize=m,exports.subsets=exports.supersets=exports.toScale=exports.chords=exports.modeNames=exports.intervals=exports.names=exports.props=void 0;var e=require("tonal-note"),r=require("tonal-pcset"),t=require("tonal-distance"),n=require("tonal-dictionary"),s=require("tonal-array"),a=Object.freeze({name:null,intervals:[],names:[],chroma:null,setnum:null}),o=function(e){var t=(0,n.scale)(e);if(!t)return a;var s={intervals:t,name:e};return s.chroma=(0,r.chroma)(t),s.setnum=parseInt(s.chroma,2),s.names=n.scale.names(s.chroma),Object.freeze(s)},u=function(e,r){return function(t){return r[t]||(r[t]=e(t))}},i=u(o,{});exports.props=i;var c=n.scale.names;exports.names=c;var l=function(e){var r=m(e);return i(r[1]).intervals};function p(e,r){var n=m(e);return r=r||n[1],l(r).map((0,t.transpose)(n[0]))}function f(e){var r=m(e);return void 0!==(0,n.scale)(r[1])}function m(r){if("string"!=typeof r)return["",""];var t=r.indexOf(" "),n=(0,e.name)(r.substring(0,t))||(0,e.name)(r)||"",s=""!==n?r.substring(n.length+1):r;return[n,s.length?s:""]}exports.intervals=l;var v=function(e){var t=l(e),s=p(e);return(0,r.modes)(t).map(function(e,r){var a=n.scale.names(e)[0];if(a)return[s[r]||t[r],a]}).filter(function(e){return e})};exports.modeNames=v;var x=function(e){var t=(0,r.isSubsetOf)(l(e));return n.chord.names().filter(function(e){return t((0,n.chord)(e))})};exports.chords=x;var d=function(r){var t=(0,s.compact)(r.map(e.pc));if(!t.length)return t;var n=t[0],a=(0,s.unique)(t);return(0,s.rotate)(a.indexOf(n),a)};exports.toScale=d;var h=function(e){if(!l(e).length)return[];var t=(0,r.isSupersetOf)(l(e));return n.scale.names().filter(function(e){return t((0,n.scale)(e))})};exports.supersets=h;var b=function(e){var t=(0,r.isSubsetOf)(l(e));return n.scale.names().filter(function(e){return t((0,n.scale)(e))})};exports.subsets=b;
},{"tonal-note":"i1w5","tonal-pcset":"hZrt","tonal-distance":"GSA/","tonal-dictionary":"t9lf","tonal-array":"USq1"}],"WG7W":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.notes=p,exports.tokenize=x,exports.subsets=exports.supersets=exports.exists=exports.intervals=exports.props=exports.names=void 0;var r=require("tonal-note"),e=require("tonal-distance"),t=require("tonal-dictionary"),n=require("tonal-pcset"),s=t.chord.names;exports.names=s;var o=Object.freeze({name:null,names:[],intervals:[],chroma:null,setnum:null}),a=function(r){var e=(0,t.chord)(r);if(!e)return o;var s={intervals:e,name:r};return s.chroma=(0,n.chroma)(e),s.setnum=parseInt(s.chroma,2),s.names=t.chord.names(s.chroma),s},u=function(r,e){return void 0===e&&(e={}),function(t){return e[t]||(e[t]=r(t))}},i=u(a);exports.props=i;var c=function(r){return i(x(r)[1]).intervals};function p(r,t){if(t)return i(t).intervals.map((0,e.transpose)(r));var n=x(r),s=n[0],o=n[1];return i(o).intervals.map((0,e.transpose)(s))}exports.intervals=c;var v=function(r){return void 0!==(0,t.chord)(x(r)[1])};exports.exists=v;var l=function(r){if(!c(r).length)return[];var e=(0,n.isSupersetOf)(c(r));return t.chord.names().filter(function(r){return e((0,t.chord)(r))})};exports.supersets=l;var f=function(r){var e=(0,n.isSubsetOf)(c(r));return t.chord.names().filter(function(r){return e((0,t.chord)(r))})};exports.subsets=f;var m=/^(6|64|7|9|11|13)$/;function x(e){var t=(0,r.tokenize)(e);return""===t[0]?["",e]:"A"===t[0]&&"ug"===t[3]?["","aug"]:m.test(t[2])?[t[0]+t[1],t[2]+t[3]]:[t[0]+t[1]+t[2],t[3]]}
},{"tonal-note":"i1w5","tonal-distance":"GSA/","tonal-dictionary":"t9lf","tonal-pcset":"hZrt"}],"6xkc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PcSet=exports.Chord=exports.Scale=exports.Dictionary=exports.Distance=exports.Interval=exports.Note=exports.Array=exports.scale=exports.chord=exports.freq=exports.midi=exports.note=exports.interval=exports.transpose=void 0;var e=i(require("tonal-array"));exports.Array=e;var r=i(require("tonal-note"));exports.Note=r;var t=i(require("tonal-interval"));exports.Interval=t;var o=i(require("tonal-distance"));exports.Distance=o;var s=i(require("tonal-dictionary"));exports.Dictionary=s;var a=i(require("tonal-scale"));exports.Scale=a;var p=i(require("tonal-chord"));exports.Chord=p;var n=i(require("tonal-pcset"));function i(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t)){var o=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,t):{};o.get||o.set?Object.defineProperty(r,t,o):r[t]=e[t]}return r.default=e,r}exports.PcSet=n;const c=o.transpose;exports.transpose=c;const x=o.interval;exports.interval=x;const l=r.props;exports.note=l;const v=r.midi;exports.midi=v;const d=r.freq;exports.freq=d;const u=s.chord;exports.chord=u;const y=s.scale;exports.scale=y;
},{"tonal-array":"USq1","tonal-note":"i1w5","tonal-interval":"79Yp","tonal-distance":"GSA/","tonal-dictionary":"t9lf","tonal-scale":"Xkhp","tonal-chord":"WG7W","tonal-pcset":"hZrt"}],"9bs3":[function(require,module,exports) {
"use strict";function e(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:43===e?62:47===e?63:0}function r(r,t){for(var n,o,c=r.replace(/[^A-Za-z0-9\+\/]/g,""),a=c.length,i=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,u=new Uint8Array(i),f=0,d=0,l=0;l<a;l++)if(o=3&l,f|=e(c.charCodeAt(l))<<18-6*o,3===o||a-l==1){for(n=0;n<3&&d<i;n++,d++)u[d]=f>>>(16>>>n&24)&255;f=0}return u}module.exports={decode:r};
},{}],"ViSh":[function(require,module,exports) {
"use strict";module.exports=function(r,e){return new Promise(function(o,n){var t=new XMLHttpRequest;e&&(t.responseType=e),t.open("GET",r),t.onload=function(){200===t.status?o(t.response):n(Error(t.statusText))},t.onerror=function(){n(Error("Network Error"))},t.send()})};
},{}],"OwAf":[function(require,module,exports) {
"use strict";var n=require("./base64"),r=require("./fetch");function t(n){return function(r){return"string"==typeof r&&n.test(r)}}function e(n,r){return"string"==typeof n?n+r:"function"==typeof n?n(r):r}function o(n,r,t,e){var o=u(r)?f:i(r)?c:a(r)?d:s(r)?l:v(r)?m:p(r)?y:h(r)?x:O(r)?j:null;return o?o(n,r,t||{}):e?Promise.resolve(e):Promise.reject("Source not valid ("+r+")")}function u(n){return n instanceof ArrayBuffer}function f(n,r,t){return new Promise(function(t,e){n.decodeAudioData(r,function(n){t(n)},function(){e("Can't decode audio data ("+r.slice(0,30)+"...)")})})}o.fetch=r;var i=t(/\.(mp3|wav|ogg)(\?.*)?$/i);function c(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"arraybuffer"),t)}function a(n){return n&&"function"==typeof n.then}function d(n,r,t){return r.then(function(r){return o(n,r,t)})}var s=Array.isArray;function l(n,r,t){return Promise.all(r.map(function(r){return o(n,r,t,r)}))}function v(n){return n&&"object"==typeof n}function m(n,r,t){var e={},u=Object.keys(r).map(function(u){if(t.only&&-1===t.only.indexOf(u))return null;var f=r[u];return o(n,f,t,f).then(function(n){e[u]=n})});return Promise.all(u).then(function(){return e})}var p=t(/\.json(\?.*)?$/i);function y(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"text").then(JSON.parse),t)}var h=t(/^data:audio/);function x(r,t,e){var u=t.indexOf(",");return o(r,n.decode(t.slice(u+1)).buffer,e)}var O=t(/\.js(\?.*)?$/i);function j(n,r,t){var u=e(t.from,r);return o(n,o.fetch(u,"text").then(w),t)}function w(n){var r=n.indexOf("MIDI.Soundfont.");if(r<0)throw Error("Invalid MIDI.js Soundfont format");r=n.indexOf("=",r)+2;var t=n.lastIndexOf(",");return JSON.parse(n.slice(r,t)+"}")}"object"==typeof module&&module.exports&&(module.exports=o),"undefined"!=typeof window&&(window.loadAudio=o);
},{"./base64":"9bs3","./fetch":"ViSh"}],"CyXT":[function(require,module,exports) {
function e(e){var a=e.createGain(),r=a._voltage=i(e),l=n(r),s=n(r),u=n(r);return a._startAmount=n(s),a._endAmount=n(u),a._multiplier=n(l),a._multiplier.connect(a),a._startAmount.connect(a),a._endAmount.connect(a),a.value=l.gain,a.startValue=s.gain,a.endValue=u.gain,a.startValue.value=0,a.endValue.value=0,Object.defineProperties(a,t),a}module.exports=e;var t={attack:{value:0,writable:!0},decay:{value:0,writable:!0},sustain:{value:1,writable:!0},release:{value:0,writable:!0},getReleaseDuration:{value:function(){return this.release}},start:{value:function(e){var t=this._multiplier.gain,a=this._startAmount.gain,i=this._endAmount.gain;this._voltage.start(e),this._decayFrom=this._decayFrom=e+this.attack,this._startedAt=e;var n=this.sustain;t.cancelScheduledValues(e),a.cancelScheduledValues(e),i.cancelScheduledValues(e),i.setValueAtTime(0,e),this.attack?(t.setValueAtTime(0,e),t.linearRampToValueAtTime(1,e+this.attack),a.setValueAtTime(1,e),a.linearRampToValueAtTime(0,e+this.attack)):(t.setValueAtTime(1,e),a.setValueAtTime(0,e)),this.decay&&t.setTargetAtTime(n,this._decayFrom,r(this.decay))}},stop:{value:function(e,t){t&&(e-=this.release);var a=e+this.release;if(this.release){var i=this._multiplier.gain,n=this._startAmount.gain,s=this._endAmount.gain;i.cancelScheduledValues(e),n.cancelScheduledValues(e),s.cancelScheduledValues(e);var u=r(this.release);if(this.attack&&e<this._decayFrom){var c=l(0,1,this._startedAt,this._decayFrom,e);i.linearRampToValueAtTime(c,e),n.linearRampToValueAtTime(1-c,e),n.setTargetAtTime(0,e,u)}s.setTargetAtTime(1,e,u),i.setTargetAtTime(0,e,u)}return this._voltage.stop(a),a}},onended:{get:function(){return this._voltage.onended},set:function(e){this._voltage.onended=e}}},a=new Float32Array([1,1]);function i(e){var t=e.createBufferSource(),i=e.createBuffer(1,2,e.sampleRate);return i.getChannelData(0).set(a),t.buffer=i,t.loop=!0,t}function n(e){var t=e.context.createGain();return e.connect(t),t}function r(e){return Math.log(e+1)/Math.log(100)}function l(e,t,a,i,n){var r=e+(n-a)/(i-a)*(t-e);return r<=e&&(r=e),r>=t&&(r=t),r}
},{}],"OHNg":[function(require,module,exports) {
"use strict";var n=require("adsr"),e={},t={gain:1,attack:.01,decay:.1,sustain:.9,release:.3,loop:!1,cents:0,loopStart:0,loopEnd:0};function r(n,r,o){var a=!1,i=0,s={},f=n.createGain();f.gain.value=1;var l=Object.assign({},t,o),d={context:n,out:f,opts:l};return r instanceof AudioBuffer?d.buffer=r:d.buffers=r,d.start=function(t,r,o){if(d.buffer&&null!==t)return d.start(null,t,r);var u=t?d.buffers[t]:d.buffer;if(u){if(a){var c=o||e;r=Math.max(n.currentTime,r||0),d.emit("start",r,t,c);var f=p(t,u,c);return f.id=function(e,t){return t.id=i++,s[t.id]=t,t.source.onended=function(){var e=n.currentTime;t.source.disconnect(),t.env.disconnect(),t.disconnect(),d.emit("ended",e,t.id,t)},t.id}(0,f),f.env.start(r),f.source.start(r),d.emit("started",r,f.id,f),c.duration&&f.stop(r+c.duration),f}console.warn("SamplePlayer not connected to any node.")}else console.warn("Buffer "+t+" not found.")},d.play=function(n,e,t){return d.start(n,e,t)},d.stop=function(n,e){var t;return(e=e||Object.keys(s)).map(function(e){return(t=s[e])?(t.stop(n),t.id):null})},d.connect=function(n){return a=!0,f.connect(n),d},d.emit=function(n,e,t,r){d.onevent&&d.onevent(n,e,t,r);var o=d["on"+n];o&&o(e,t,r)},d;function p(e,t,r){var o=n.createGain();return o.gain.value=0,o.connect(f),o.env=u(n,r,l),o.env.connect(o.gain),o.source=n.createBufferSource(),o.source.buffer=t,o.source.connect(o),o.source.loop=r.loop||l.loop,o.source.playbackRate.value=c(r.cents||l.cents),o.source.loopStart=r.loopStart||l.loopStart,o.source.loopEnd=r.loopEnd||l.loopEnd,o.stop=function(t){var r=t||n.currentTime;d.emit("stop",r,e);var a=o.env.stop(r);o.source.stop(a)},o}}function o(n){return"number"==typeof n}var a=["attack","decay","sustain","release"];function u(e,t,r){var u=n(e),c=t.adsr||r.adsr;return a.forEach(function(n,e){u[n]=c?c[e]:t[n]||r[n]}),u.value.value=o(t.gain)?t.gain:o(r.gain)?r.gain:1,u}function c(n){return n?Math.pow(2,n/1200):1}module.exports=r;
},{"adsr":"CyXT"}],"ni0K":[function(require,module,exports) {
function n(n,t){return function(o,e,r,u){n(o,e,r,u),t(o,e,r,u)}}module.exports=function(t){return t.on=function(o,e){if(1===arguments.length&&"function"==typeof o)return t.on("event",o);var r="on"+o,u=t[r];return t[r]=u?n(u,e):e,t},t};
},{}],"WCUa":[function(require,module,exports) {
"use strict";var t=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function r(){return t}var e=[0,2,4,5,7,9,11];function c(r,c,n){if("string"!=typeof r)return null;var o=t.exec(r);if(!o||!c&&o[4])return null;var i={letter:o[1].toUpperCase(),acc:o[2].replace(/x/g,"##")};return i.pc=i.letter+i.acc,i.step=(i.letter.charCodeAt(0)+3)%7,i.alt="b"===i.acc[0]?-i.acc.length:i.acc.length,i.chroma=e[i.step]+i.alt,o[3]&&(i.oct=+o[3],i.midi=i.chroma+12*(i.oct+1),i.freq=a(i.midi,n)),c&&(i.tonicOf=o[4]),i}function a(t,r){return Math.pow(2,(t-69)/12)*(r||440)}var n={parse:c,regex:r,midiToFreq:a},o=["letter","acc","pc","step","alt","chroma","oct","midi","freq"];o.forEach(function(t){n[t]=function(r){var e=c(r);return e&&void 0!==e[t]?e[t]:null}}),module.exports=n;
},{}],"eE6H":[function(require,module,exports) {
"use strict";var r=require("note-parser"),t=function(r){return null!==r&&r!==[]&&r>=0&&r<129},n=function(n){return t(n)?+n:r.midi(n)};function e(r,t){return Object.keys(r).reduce(function(n,e){return n[t(e)]=r[e],n},{})}module.exports=function(r){if(r.buffers){var t=r.opts.map,u="function"==typeof t?t:n,f=function(r){return r?u(r)||r:null};r.buffers=e(r.buffers,f);var o=r.start;r.start=function(r,t,n){var e=f(r),u=e%1;return u&&(e=Math.floor(e),n=Object.assign(n||{},{cents:Math.floor(100*u)})),o(e,t,n)}}return r};
},{"note-parser":"WCUa"}],"GlIv":[function(require,module,exports) {
"use strict";var e=Array.isArray,t=function(e){return e&&"object"==typeof e},r={};module.exports=function(n){return n.schedule=function(u,i){var c,o,a,l,m=n.context.currentTime,s=u<m?m:u;return n.emit("schedule",s,i),i.map(function(u){return u?(e(u)?(c=u[0],o=u[1]):(c=u.time,o=u),t(o)?(a=o.name||o.key||o.note||o.midi||null,l=o):(a=o,l=r),n.start(a,s+(c||0),l)):null})},n};
},{}],"vk7p":[function(require,module,exports) {
var define;
var global = arguments[3];
var e,t=arguments[3];!function(s){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=s();else if("function"==typeof e&&e.amd)e([],s);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).midimessage=s()}}(function(){return function e(t,s,o){function a(n,i){if(!s[n]){if(!t[n]){var l="function"==typeof require&&require;if(!i&&l)return l(n,!0);if(r)return r(n,!0);var h=new Error("Cannot find module '"+n+"'");throw h.code="MODULE_NOT_FOUND",h}var c=s[n]={exports:{}};t[n][0].call(c.exports,function(e){var s=t[n][1][e];return a(s||e)},c,c.exports,e,t,s,o)}return s[n].exports}for(var r="function"==typeof require&&require,n=0;n<o.length;n++)a(o[n]);return a}({1:[function(e,t,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(e){return new function(e){if(this._event=e,this._data=e.data,this.receivedTime=e.receivedTime,this._data&&this._data.length<2)console.warn("Illegal MIDI message of length",this._data.length);else switch(this._messageCode=240&e.data[0],this.channel=15&e.data[0],this._messageCode){case 128:this.messageType="noteoff",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 144:this.messageType="noteon",this.key=127&e.data[1],this.velocity=127&e.data[2];break;case 160:this.messageType="keypressure",this.key=127&e.data[1],this.pressure=127&e.data[2];break;case 176:this.messageType="controlchange",this.controllerNumber=127&e.data[1],this.controllerValue=127&e.data[2],120===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allsoundoff":121===this.controllerNumber?this.channelModeMessage="resetallcontrollers":122===this.controllerNumber?0===this.controllerValue?this.channelModeMessage="localcontroloff":this.channelModeMessage="localcontrolon":123===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="allnotesoff":124===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeoff":125===this.controllerNumber&&0===this.controllerValue?this.channelModeMessage="omnimodeon":126===this.controllerNumber?this.channelModeMessage="monomodeon":127===this.controllerNumber&&(this.channelModeMessage="polymodeon");break;case 192:this.messageType="programchange",this.program=e.data[1];break;case 208:this.messageType="channelpressure",this.pressure=127&e.data[1];break;case 224:this.messageType="pitchbendchange";var t=127&e.data[2],s=127&e.data[1];this.pitchBend=(t<<8)+s}}(e)},t.exports=s.default},{}]},{},[1])(1)});
},{}],"NBgF":[function(require,module,exports) {
var e=require("midimessage");module.exports=function(n){return n.listenToMidi=function(o,a){var i={},s=a||{},t=s.gain||function(e){return e/127};return o.onmidimessage=function(o){var a=o.messageType?o:e(o);if("noteon"===a.messageType&&0===a.velocity&&(a.messageType="noteoff"),!s.channel||a.channel===s.channel)switch(a.messageType){case"noteon":i[a.key]=n.play(a.key,0,{gain:t(a.velocity)});break;case"noteoff":i[a.key]&&(i[a.key].stop(),delete i[a.key])}},n},n};
},{"midimessage":"vk7p"}],"aLMt":[function(require,module,exports) {
"use strict";var e=require("./player"),r=require("./events"),u=require("./notes"),i=require("./scheduler"),o=require("./midi");function t(t,d,n){return o(i(u(r(e(t,d,n)))))}"object"==typeof module&&module.exports&&(module.exports=t),"undefined"!=typeof window&&(window.SamplePlayer=t);
},{"./player":"OHNg","./events":"ni0K","./notes":"eE6H","./scheduler":"GlIv","./midi":"NBgF"}],"B8Fa":[function(require,module,exports) {
"use strict";function t(t,r){return Array(r+1).join(t)}function r(t){return"number"==typeof t}function e(t){return"string"==typeof t}function n(t){return void 0!==t}function u(t,r){return Math.pow(2,(t-69)/12)*(r||440)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.regex=o,exports.parse=a,exports.build=s,exports.midi=x,exports.freq=d,exports.letter=v,exports.acc=m,exports.pc=h,exports.step=g,exports.alt=b,exports.chroma=y,exports.oct=A;var c=/^([a-gA-G])(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)\s*$/;function o(){return c}var i=[0,2,4,5,7,9,11];function a(t,r,e){if("string"!=typeof t)return null;var n=c.exec(t);if(!n||!r&&n[4])return null;var o={letter:n[1].toUpperCase(),acc:n[2].replace(/x/g,"##")};o.pc=o.letter+o.acc,o.step=(o.letter.charCodeAt(0)+3)%7,o.alt="b"===o.acc[0]?-o.acc.length:o.acc.length;var a=i[o.step]+o.alt;return o.chroma=a<0?12+a:a%12,n[3]&&(o.oct=+n[3],o.midi=a+12*(o.oct+1),o.freq=u(o.midi,e)),r&&(o.tonicOf=n[4]),o}var l="CDEFGAB";function p(e){return r(e)?e<0?t("b",-e):t("#",e):""}function f(t){return r(t)?""+t:""}function s(t,r,e){return null==t?null:t.step?s(t.step,t.alt,t.oct):t<0||t>6?null:l.charAt(t)+p(r)+f(e)}function x(t){if((r(t)||e(t))&&t>=0&&t<128)return+t;var u=a(t);return u&&n(u.midi)?u.midi:null}function d(t,r){var e=x(t);return null===e?null:u(e,r)}function v(t){return(a(t)||{}).letter}function m(t){return(a(t)||{}).acc}function h(t){return(a(t)||{}).pc}function g(t){return(a(t)||{}).step}function b(t){return(a(t)||{}).alt}function y(t){return(a(t)||{}).chroma}function A(t){return(a(t)||{}).oct}
},{}],"ZmEu":[function(require,module,exports) {
"use strict";var n=require("note-parser");function e(n,t){if(console.warn("new Soundfont() is deprected"),console.log("Please use Soundfont.instrument() instead of new Soundfont().instrument()"),!(this instanceof e))return new e(n);this.nameToUrl=t||e.nameToUrl,this.ctx=n,this.instruments={},this.promises=[]}function t(n,t,o){return console.warn("Soundfont.loadBuffers is deprecate."),console.log("Use Soundfont.instrument(..) and get buffers properties from the result."),e.instrument(n,t,o).then(function(n){return n.buffers})}function o(e,t){return t=t||{},function(o,s,r,i){console.warn("The oscillator player is deprecated."),console.log("Starting with version 0.9.0 you will have to wait until the soundfont is loaded to play sounds.");var u=o>0&&o<129?+o:n.midi(o),a=u?n.midiToFreq(u,440):null;if(a){r=r||.2;var d=(i=i||{}).destination||t.destination||e.destination,l=i.vcoType||t.vcoType||"sine",c=i.gain||t.gain||.4,f=e.createOscillator();f.type=l,f.frequency.value=a;var m=e.createGain();return m.gain.value=c,f.connect(m),m.connect(d),f.start(s),r>0&&f.stop(s+r),f}}}e.prototype.onready=function(n){console.warn("deprecated API"),console.log("Please use Promise.all(Soundfont.instrument(), Soundfont.instrument()).then() instead of new Soundfont().onready()"),Promise.all(this.promises).then(n)},e.prototype.instrument=function(n,t){console.warn("new Soundfont().instrument() is deprecated."),console.log("Please use Soundfont.instrument() instead.");var s=this.ctx;if((n=n||"default")in this.instruments)return this.instruments[n];var r={name:n,play:o(s,t)};if(this.instruments[n]=r,"default"!==n){var i=e.instrument(s,n,t).then(function(n){return r.play=n.play,r});this.promises.push(i),r.onready=function(n){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),i.then(n)}}else r.onready=function(n){console.warn("onready is deprecated. Use Soundfont.instrument().then()"),n()};return r},e.loadBuffers=t,e.noteToMidi=n.midi,module.exports=e;
},{"note-parser":"B8Fa"}],"CSY2":[function(require,module,exports) {
"use strict";var n=require("audio-loader"),t=require("sample-player");function e(i,u,s){if(1===arguments.length)return function(n,t){return e(i,n,t)};var d=s||{},a=d.isSoundfontURL||o,l=d.nameToUrl||r,f=a(u)?u:l(u,d.soundfont,d.format);return n(i,f,{only:d.only||d.notes}).then(function(n){var e=t(i,n,d).connect(d.destination?d.destination:i.destination);return e.url=f,e.name=u,e})}function o(n){return/\.js(\?.*)?$/i.test(n)}function r(n,t,e){return"https://gleitz.github.io/midi-js-soundfonts/"+(t="FluidR3_GM"===t?t:"MusyngKite")+"/"+n+"-"+(e="ogg"===e?e:"mp3")+".js"}var i=require("./legacy");i.instrument=e,i.nameToUrl=r,"object"==typeof module&&module.exports&&(module.exports=i),"undefined"!=typeof window&&(window.Soundfont=i);
},{"audio-loader":"OwAf","sample-player":"aLMt","./legacy":"ZmEu"}],"pR4u":[function(require,module,exports) {
"use strict";function r(r){return e(r)||n(r)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function n(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)}function e(r){if(Array.isArray(r)){for(var t=0,n=new Array(r.length);t<r.length;t++)n[t]=r[t];return n}}function o(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.max(t,Math.min(r,n))}function u(r,t,n){var e=n-t,o=r-t;if(o>=0)return o%e+t;var u=e+o%e+t;return u>=n&&(u-=e),u}function a(r,t,n){return t<=r&&r<=n}function i(t){return r(Array(t).keys())}function c(r,t){null==t&&(t=function(r,t){return r-t});var n=r.map(function(r,t){return[r,t]});return n.sort(function(r,n){var e=t(r[0],n[0]);return 0!==e?e:r[1]-n[1]}),n.map(function(r){return r[0]})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.clamp=o,exports.wrap=u,exports.isInRange=a,exports.range=i,exports.stableSort=c;
},{}],"aHC3":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var e=require("tonal"),n=t(require("soundfont-player")),o=require("./math"),r=window,u=r.AudioContext||r.webkitAudioContext;exports.audioContext=new u;var a={},i=!0;function s(t){i&&(/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?i=!1:null==a[t]&&n.instrument(exports.audioContext,t,{soundfont:"FluidR3_GM"}).then(function(e){a[t]=e}))}function l(t,n,r,u,a){var i=e.scale(t),s=Math.ceil(a*u/i.length);return Array.prototype.concat.apply([],o.range(s).map(function(t){return i.map(e.transpose("".concat(n).concat(r+t)))})).filter(function(t,e){return e%u==0}).splice(0,a)}function p(t,e,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.2,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;if(null!=exports.audioContext&&"running"===exports.audioContext.state&&i){var u=a[t];null!=u&&u.play(e,n,{duration:o,gain:r})}}function d(){null!=exports.audioContext&&"suspended"===exports.audioContext.state&&exports.audioContext.resume()}exports.loadInstrument=s,exports.getNotes=l,exports.play=p,exports.resumeAudioContext=d;
},{"tonal":"6xkc","soundfont-player":"CSY2","./math":"pR4u"}],"HIZ7":[function(require,module,exports) {
"use strict";function t(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function i(t,i){for(var n=0;n<i.length;n++){var e=i[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./math");function s(t){return null!=t.x&&null!=t.y}var h=function(){function i(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;t(this,i),this.x=0,this.y=0,this.set(n,e)}return n(i,[{key:"set",value:function(t,i){return s(t)?(this.x=t.x,this.y=t.y,this):(this.x=t,this.y=null==i?t:i,this)}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"mul",value:function(t){return this.x*=t,this.y*=t,this}},{key:"div",value:function(t){return this.x/=t,this.y/=t,this}},{key:"clamp",value:function(t,i,n,s){return this.x=e.clamp(this.x,t,i),this.y=e.clamp(this.y,n,s),this}},{key:"wrap",value:function(t,i,n,s){return this.x=e.wrap(this.x,t,i),this.y=e.wrap(this.y,n,s),this}},{key:"addAngle",value:function(t,i){return this.x+=Math.cos(t)*i,this.y+=Math.sin(t)*i,this}},{key:"swapXy",value:function(){var t=this.x;return this.x=this.y,this.y=t,this}},{key:"normalize",value:function(){return this.div(this.length),this}},{key:"rotate",value:function(t){if(0===t)return this;var i=this.x;return this.x=i*Math.cos(t)-this.y*Math.sin(t),this.y=i*Math.sin(t)+this.y*Math.cos(t),this}},{key:"getAngle",value:function(t){return null==t?Math.atan2(this.y,this.x):Math.atan2(t.y-this.y,t.x-this.x)}},{key:"distanceTo",value:function(t){var i=this.x-t.x,n=this.y-t.y;return Math.sqrt(i*i+n*n)}},{key:"isInRect",value:function(t,i,n,s){return e.isInRange(this.x,t,t+n)&&e.isInRange(this.y,i,i+s)}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}}]),i}();exports.Vector=h;
},{"./math":"pR4u"}],"40fr":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function r(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}var n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("./led"),s=n(require("./sound")),i=require("./math"),u=require("./vector");exports.count=16,exports.leds=[],exports.offset=new u.Vector;var a,f,p=[],l=exports.count-1,c=0,d={tempo:300,isMarkerHorizontal:!0};function x(e){if(a=[],!(exports.leds.length>0)){d=Object.assign({},d,e),exports.offset.set(1.2*o.size);for(var t=0;t<exports.count;t++){for(var r=[],n=0;n<exports.count;n++){var s=new o.Led({x:t*o.size+exports.offset.x,y:n*o.size+exports.offset.y});r.push(s)}exports.leds.push(r);var i=(t+1.2)*o.size,u=.5*o.size,f=void 0;d.isMarkerHorizontal?(f=new o.Led({x:i,y:u})).height/=2:(f=new o.Led({x:u,y:i})).width/=2,f.setColor(7),p.push(f)}}}function h(e,t,r,n){e.split("\n").forEach(function(e,o){for(var s=0;s<e.length;s++)v(e.charAt(s),t,s+r,o+n)})}function v(e,t,r,n){if(!(r<0||r>=exports.count||n<0||n>=exports.count)){var o="-rgybpcw".indexOf(e);o<0||(exports.leds[r][n].setColor(o),exports.leds[r][n].setBrightness(t))}}function y(){b();for(var e=0;e<exports.count;e++){for(var t=0;t<exports.count;t++)exports.leds[e][t].update();p[e].update()}}function m(e,t){f={instrumentName:e,note:t}}exports.init=x,exports.print=h,exports.printChar=v,exports.update=y,exports.scheduleSound=m;var g=function(){function t(r){e(this,t),this.filter=r,this.sounds=i.range(exports.count).map(function(){return null}),this.isPlayings=i.range(exports.count).map(function(){return!1})}return r(t,[{key:"add",value:function(e,t,r,n,o,i,u){var a=this;s.loadInstrument(t),s.getNotes(r,n,o,i,u).forEach(function(r,n){a.sounds[e+n]={instrumentName:t,note:r}})}},{key:"play",value:function(){for(var e=0;e<exports.count;e++){var t=d.isMarkerHorizontal?l:e,r=d.isMarkerHorizontal?e:l;if(this.filter(exports.leds[t][r],t,r)){if(!this.isPlayings[e]){var n=this.sounds[e];null!=n&&s.play(n.instrumentName,n.note,c),this.isPlayings[e]=!0}}else this.isPlayings[e]=!1}}}]),t}();function w(e){var t=new g(e);return a.push(t),t}function b(){var e=s.audioContext.currentTime;(0===e||e>c)&&(c=e+.1),c-e>.1||(k(0,l),l=(l+1)%exports.count,z(),null!=f&&(s.play(f.instrumentName,f.note,c),f=void 0),k(2,l),c+=60/d.tempo)}function k(e,t){p[t].setBrightness(e)}function z(){a.forEach(function(e){e.play()})}exports.MarkerSound=g,exports.addMarkerSound=w;
},{"./led":"9p0f","./sound":"aHC3","./math":"pR4u","./vector":"HIZ7"}],"Tx6Z":[function(require,module,exports) {
"use strict";function r(){var r=0,t=32,s=0;exports.dotPatterns=[];for(var a=0;a<e;a++){for(var f=[],i=0;i<5;i++)for(var n=0;n<4;n++)++t>=32&&(r=o[s++],t=0),(1&r)>0&&f.push({x:n,y:i}),r>>=1;exports.dotPatterns.push(f)}exports.charToIndex=[];for(var p=0;p<128;p++){var x=-2;if(32==p)x=-1;else if(p>=48&&p<58)x=p-48;else if(p>=65&&p<90)x=p-65+10;else{var d="()[]<>=+-*/%&_!?,.:|'\"$@#\\urdl".indexOf(String.fromCharCode(p));d>=0&&(x=d+36)}exports.charToIndex.push(x)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.init=r;var e=66,o=[1178905252,1864668900,4116998473,376992244,613021335,3915814550,2046400104,2442557817,528062838,292683543,4187935126,3997453977,1398351172,4193325337,2648414617,2037815702,2128188945,2250152313,2571388135,1181324953,1771503001,4098267545,572846664,639910948,1682204194,2217230920,1089531940,251675876,1208634944,2588250404,678422,1678001392,2147500105,1077936132,1145323584,178257988,1685513216,4210713049,3830337194,619979845,4064601412,66];
},{}],"/sou":[function(require,module,exports) {
"use strict";var t=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r.default=t,r};Object.defineProperty(exports,"__esModule",{value:!0});var r=t(require("./letterPattern")),n=t(require("./view")),e=t(require("./led")),i=require("./math");function o(){r.init()}function a(t){t.setPriority(0),t.str="",t.setText=function(n){if(0!==n.length){var e=4===(n=n.substr(0,4)).length?4:5;t.pos.x=[11,6,1,0][n.length-1];for(var o=i.range(5).map(function(){return i.range(n.length*e).map(function(){return" "})}),a=function(t){var i=r.charToIndex[n.charCodeAt(t)];if(i<0)return"continue";r.dotPatterns[i].forEach(function(r){o[r.y][r.x+t*e]="w"})},c=0;c<n.length;c++)a(c);t.str=o.map(function(t){return t.join("")}).join("\n")}else t.str=""}}function c(t){var i=n.descriptionCanvas,o=n.descriptionContext;o.clearRect(0,0,i.width,i.height);var a=e.colors[7];o.fillStyle="rgb(".concat((16711680&a)>>16,",\n  ").concat((65280&a)>>8,",\n  ").concat(255&a,")");var c=0;t.split("\n").forEach(function(t){for(var n=function(n){var e=r.charToIndex[t.charCodeAt(n)];if(e<0)return"continue";r.dotPatterns[e].forEach(function(t){o.fillRect(t.x+5*n,t.y+c,1,1)})},e=0;e<t.length;e++)n(e);c+=6})}exports.init=o,exports.text=a,exports.drawDescription=c;
},{"./letterPattern":"Tx6Z","./view":"YCKg","./led":"9p0f","./math":"pR4u"}],"yTBb":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}Object.defineProperty(exports,"__esModule",{value:!0});var n=function(){function e(){t(this,e),this.pool=exports.pool,this.isAlive=!0,this.ticks=0,this.updaterPool=new o,this.priority=1}return i(e,[{key:"remove",value:function(){this.isAlive&&(null!=this.onRemove&&this.onRemove(),this.isAlive=!1)}},{key:"addUpdater",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=new s(t,e,this);return this.updaterPool.add(i),i}},{key:"setPool",value:function(t){this.pool=t}},{key:"setPriority",value:function(t){this.priority=t,this.pool.enablePriority()}},{key:"init",value:function(t){this.func=t;for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];t.apply(void 0,[this].concat(i)),this.pool.add(this)}},{key:"update",value:function(){this.updaterPool.update(),this.ticks++}}]),e}();exports.Actor=n;var s=function(){function e(i,n,s){t(this,e),this.updateFunc=i,this.interval=n,this.actor=s,this.isAlive=!0,this.ticks=0,this.intervalTicks=0,this.func=i}return i(e,[{key:"remove",value:function(){this.isAlive=!1}},{key:"setInterval",value:function(t){this.interval=t}},{key:"update",value:function(){this.intervalTicks--,this.intervalTicks<=0&&(this.updateFunc(this,this.actor),this.intervalTicks=this.interval),this.ticks++}}]),e}();exports.Updater=s;var o=function(){function e(){t(this,e),this.instances=[],this.isRemovingAllInstances=!1,this.isPriorityEnabled=!1}return i(e,[{key:"add",value:function(t){this.instances.push(t)}},{key:"update",value:function(){this.isPriorityEnabled&&(this.instances=p(this.instances,function(t,e){return e.priority-t.priority}));for(var t=0;t<this.instances.length;){var e=this.instances[t];if(e.isAlive&&e.update(),this.isRemovingAllInstances){this.isRemovingAllInstances=!1;break}e.isAlive?t++:this.instances.splice(t,1)}}},{key:"get",value:function(t){return null==t?this.instances.filter(function(t){return t.isAlive}):this.instances.filter(function(e){return e.func===t&&e.isAlive})}},{key:"removeAll",value:function(){this.instances.forEach(function(t){t.remove()}),this.instances=[],this.isRemovingAllInstances=!0}},{key:"enablePriority",value:function(){this.isPriorityEnabled=!0}}]),e}();exports.Pool=o,exports.pool=new o,exports.updaterPool=new o;var r=n;function a(t){for(var e=new r,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];return e.init.apply(e,[t].concat(n)),e}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=new s(t,e);return exports.updaterPool.add(i),i}function l(){exports.pool.update(),exports.updaterPool.update()}function c(){exports.pool.removeAll(),exports.updaterPool.removeAll()}function h(t){r=t}function p(t,e){var i=t.map(function(t,e){return[t,e]});return i.sort(function(t,i){var n=e(t[0],i[0]);return 0!==n?n:t[1]-i[1]}),i.map(function(t){return t[0]})}exports.spawn=a,exports.addUpdater=u,exports.update=l,exports.reset=c,exports.setActorClass=h;
},{}],"OR1q":[function(require,module,exports) {
"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function o(e,r){return!r||"object"!==t(r)&&"function"!=typeof r?i(e):r}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t,e,r){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,r){var n=c(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}})(t,e,r||t)}function c(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=f(t)););return t}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&s(t,e)}function s(t,e){return(s=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var p=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});var a=p(require("./simpleGameActor")),y=require("./vector"),b=p(require("./matrix")),h=function(t){function r(){var t;return e(this,r),(t=o(this,f(r).apply(this,arguments))).pos=new y.Vector,t.str="w",t.brightness=2,t}return l(r,a.Actor),n(r,[{key:"update",value:function(){u(f(r.prototype),"update",this).call(this),this.isAlive&&b.print(this.str,this.brightness,this.pos.x,this.pos.y)}}]),r}();exports.Actor=h;
},{"./simpleGameActor":"yTBb","./vector":"HIZ7","./matrix":"40fr"}],"+kme":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var s={};if(null!=e)for(var t in e)Object.hasOwnProperty.call(e,t)&&(s[t]=e[t]);return s.default=e,s};Object.defineProperty(exports,"__esModule",{value:!0});var s=require("./vector"),t=require("./math"),r=e(require("./sound"));exports.isPressed=!1,exports.isJustPressed=!1,exports.stick=new s.Vector;var i={isUsingStickKeysAsButton:!1,isFourWaysStick:!1},o=!1,n=t.range(256).map(function(){return!1}),u=t.range(256).map(function(){return!1}),c=[[39,68,102],[40,83,101,98],[37,65,100],[38,87,104]],p=[[1,0],[0,1],[-1,0],[0,-1]],a=[90,88,67,86,66,78,77,188,190,191,17,16,18,32,13];function d(e){i=Object.assign({},i,e),o||(document.addEventListener("keydown",function(e){n[e.keyCode]=u[e.keyCode]=!0,r.resumeAudioContext()}),document.addEventListener("keyup",function(e){n[e.keyCode]=!1}),o=!0)}function x(){if(o){var e=exports.isPressed;exports.isPressed=exports.isJustPressed=!1,exports.stick.set(0),c.forEach(function(s,t){s.forEach(function(s){(n[s]||u[s])&&(exports.stick.x+=p[t][0],exports.stick.y+=p[t][1],i.isUsingStickKeysAsButton&&(exports.isPressed=!0),u[s]&&(u[s]=!1,i.isUsingStickKeysAsButton&&!e&&(exports.isJustPressed=!0)))})}),exports.stickAngle=0,exports.stick.length>0&&f(exports.stick.getAngle()),a.forEach(function(s){n[s]&&(exports.isPressed=!0),u[s]&&(u[s]=!1,e||(exports.isPressed=exports.isJustPressed=!0))})}}exports.init=d,exports.update=x;var k=[1,0,1,1,0,1,-1,1,-1,0,-1,-1,0,-1,1,-1];function f(e){var s=i.isFourWaysStick?Math.PI/2:Math.PI/4,r=i.isFourWaysStick?2:1;exports.stickAngle=t.wrap(Math.round(e/s)*r,0,8),exports.stick.set(k[2*exports.stickAngle],k[2*exports.stickAngle+1]),exports.stickAngle++}function P(){exports.isJustPressed=!1,exports.isPressed=!0}exports.clearJustPressed=P;
},{"./vector":"HIZ7","./math":"pR4u","./sound":"aHC3"}],"iXZc":[function(require,module,exports) {
"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t(this,e),this.setSeed(n)}return n(e,[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1?arguments[1]:void 0;return null==e&&(e=t,t=0),this.next()/4294967295*(e-t)+t}},{key:"getInt",value:function(t,e){return null==e&&(e=t,t=0),this.next()%(e-t)+t}},{key:"getPlusOrMinus",value:function(){return 2*this.getInt(2)-1}},{key:"select",value:function(t){return t[this.getInt(t.length)]}},{key:"setSeed",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:123456789,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:362436069,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:521288629,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:32;this.w=null!=t?t>>>0:Math.floor(4294967295*Math.random())>>>0,this.x=e>>>0,this.y=n>>>0,this.z=i>>>0;for(var u=0;u<r;u++)this.next();return this}},{key:"next",value:function(){var t=this.x^this.x<<11;return this.x=this.y,this.y=this.z,this.z=this.w,this.w=(this.w^this.w>>>19^t^t>>>8)>>>0,this.w}}]),e}();exports.Random=i;
},{}],"iUdv":[function(require,module,exports) {
"use strict";function e(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function s(e,s){for(var t=0;t<s.length;t++){var i=s[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t,i){return t&&s(e.prototype,t),i&&s(e,i),e}Object.defineProperty(exports,"__esModule",{value:!0});var i=require("./vector"),o=require("./random"),n=require("./math"),h=function(){function s(t,n){var h=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new i.Vector,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new i.Vector;e(this,s),this.screen=t,this.isDebugMode=h,this.anchor=r,this.padding=u,this.pos=new i.Vector,this.move=new i.Vector,this.pressedPos=new i.Vector,this.targetPos=new i.Vector,this.isPressed=!1,this.isJustPressed=!1,this.prevPos=new i.Vector,this.debugRandom=new o.Random,this.debugPos=new i.Vector,this.debugMoveVel=new i.Vector,this.debugIsDown=!1,this.pixelSize=new i.Vector(n.x+2*u.x,n.y+2*u.y),this.targetPos.set(this.pixelSize.x/2,this.pixelSize.y/2),h&&this.debugPos.set(this.pixelSize.x/2,this.pixelSize.y/2)}return t(s,[{key:"update",value:function(){this.calcPointerPos(u.x,u.y,this.pos),this.isDebugMode&&!this.pos.isInRect(0,0,this.pixelSize.x,this.pixelSize.y)?(this.updateDebug(),this.pos.set(this.debugPos),this.isJustPressed=!this.isPressed&&this.debugIsDown,this.isPressed=this.debugIsDown):(this.isJustPressed=!this.isPressed&&a,this.isPressed=d),this.isJustPressed&&(this.pressedPos.set(this.pos),this.prevPos.set(this.pos)),this.move.set(this.pos.x-this.prevPos.x,this.pos.y-this.prevPos.y),this.prevPos.set(this.pos),c?this.targetPos.set(this.pos):this.targetPos.add(this.move)}},{key:"clearJustPressed",value:function(){this.isJustPressed=!1,this.isPressed=!0}},{key:"resetPressedPointerPos",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.pressedPos.x+=(this.pos.x-this.pressedPos.x)*e,this.pressedPos.y+=(this.pos.y-this.pressedPos.y)*e}},{key:"setTargetPos",value:function(e){this.targetPos.set(e)}},{key:"calcPointerPos",value:function(e,s,t){null!=this.screen&&(t.x=((e-this.screen.offsetLeft)/this.screen.clientWidth+this.anchor.x)*this.pixelSize.x-this.padding.x,t.y=((s-this.screen.offsetTop)/this.screen.clientHeight+this.anchor.y)*this.pixelSize.y-this.padding.y)}},{key:"updateDebug",value:function(){this.debugMoveVel.length>0?(this.debugPos.add(this.debugMoveVel),!n.isInRange(this.debugPos.x,.1*-this.pixelSize.x,1.1*this.pixelSize.x)&&this.debugPos.x*this.debugMoveVel.x>0&&(this.debugMoveVel.x*=-1),!n.isInRange(this.debugPos.y,.1*-this.pixelSize.y,1.1*this.pixelSize.y)&&this.debugPos.y*this.debugMoveVel.y>0&&(this.debugMoveVel.y*=-1),this.debugRandom.get()<.05&&this.debugMoveVel.set(0)):this.debugRandom.get()<.1&&(this.debugMoveVel.set(0),this.debugMoveVel.addAngle(this.debugRandom.get(2*Math.PI),(this.pixelSize.x+this.pixelSize.y)*this.debugRandom.get(.01,.03))),this.debugRandom.get()<.05&&(this.debugIsDown=!this.debugIsDown)}}]),s}();exports.Pointer=h;var r,u=new i.Vector(-9999,-9999),d=!1,a=!1,c=!1;function g(e){r=e,document.addEventListener("mousedown",function(e){l(e.pageX,e.pageY)}),document.addEventListener("touchstart",function(e){l(e.touches[0].pageX,e.touches[0].pageY)}),document.addEventListener("mousemove",function(e){v(e.pageX,e.pageY)}),document.addEventListener("touchmove",function(e){e.preventDefault(),v(e.touches[0].pageX,e.touches[0].pageY)},{passive:!1}),document.addEventListener("mouseup",function(e){P(e)}),document.addEventListener("touchend",function(e){e.preventDefault(),e.target.click(),P(e)},{passive:!1})}function p(){a=!1}function l(e,s){u.set(e,s),d=a=!0,c=!1}function v(e,s){u.set(e,s),d||(c=!0)}function P(e){d=!1,c=!1,null!=r&&r()}exports.init=g,exports.resetIsClicked=p;
},{"./vector":"HIZ7","./random":"iXZc","./math":"pR4u"}],"Cmo+":[function(require,module,exports) {
"use strict";var e=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(exports,"__esModule",{value:!0});var t,r=e(require("./view")),i=e(require("./matrix")),n=e(require("./led")),s=e(require("./text")),o=e(require("./simpleGameActor")),a=require("./actor"),c=e(require("./keyboard")),u=require("./pointer"),p=e(require("./sound")),d=require("./math"),f=require("./vector");exports.background="";var l,x,m,g,v={matrixOptions:{tempo:300,isMarkerHorizontal:!1},title:"",description:"",onInitialize:function(){},onStartingTitle:function(){},onStartingGame:function(){},onStartingGameOver:function(){},onClickCursor:function(e){}},k=300;function w(e){v=Object.assign({},v,e),r.init(S,q)}function S(){c.init({isFourWaysStick:!0,isUsingStickKeysAsButton:!0}),u.init(p.resumeAudioContext),t=new u.Pointer(r.canvas,new f.Vector(r.size),!1,new f.Vector(.5)),s.init(),o.setActorClass(a.Actor),i.init(v.matrixOptions),v.onInitialize(),J(),s.drawDescription(v.description)}function q(){c.update(),t.update(),u.resetIsClicked(),i.print(exports.background,1,0,0),m>=0&&A(),"game"===exports.scene&&k>0&&0===--k&&s.drawDescription(""),o.update(),i.update()}function O(e){exports.background=e}function P(){o.reset(),exports.cursor=o.spawn(M),(x=o.spawn(s.text)).pos.y=10}function h(){exports.scene="gameOver",m=0,b(),v.onStartingGameOver(),z()}function y(e){l+=e}function b(){x.setText("".concat(l))}function C(){x.setText("")}function G(){exports.scene="game",l=0,m=-1,v.onStartingGame(),c.clearJustPressed(),t.clearJustPressed()}function J(){exports.scene="title",m=240,v.onStartingTitle(),z()}function z(){(g=o.spawn(s.text)).pos.y=1,c.clearJustPressed(),t.clearJustPressed()}function A(){m>=240?240===m&&g.setText(v.title):m%60==0&&g.setText(m/60%2==0?"GAME":"OVER"),++m>30&&(c.isJustPressed||t.isJustPressed)&&G()}function M(e){var r=0;e.setPriority(.5),e.onClick=function(t,i){e.pos.set(t,i),r=5,e.str="w",e.brightness=3,v.onClickCursor(e.pos)},e.addUpdater(function(){if(t.isJustPressed){var s=d.clamp(Math.floor((t.pos.x-i.offset.x)/n.size+.5),0,15),o=d.clamp(Math.floor((t.pos.y-i.offset.y)/n.size+.5),0,15);e.onClick(s,o)}--r<0&&(e.str="",e.brightness=0)})}exports.init=w,exports.setBackground=O,exports.reset=P,exports.startGameOver=h,exports.addScore=y,exports.showScore=b,exports.hideScore=C;
},{"./view":"YCKg","./matrix":"40fr","./led":"9p0f","./text":"/sou","./simpleGameActor":"yTBb","./actor":"OR1q","./keyboard":"+kme","./pointer":"iUdv","./sound":"aHC3","./math":"pR4u","./vector":"HIZ7"}],"ZCfc":[function(require,module,exports) {
"use strict";var n=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(null!=n)for(var r in n)Object.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t.default=n,t};Object.defineProperty(exports,"__esModule",{value:!0});var t,r=n(require("../util/game")),o=n(require("../util/matrix")),e=n(require("../util/text")),a=n(require("../util/simpleGameActor")),p=n(require("../util/keyboard")),s=n(require("../util/sound")),i=require("../util/math"),c=require("../util/random"),u=require("../util/vector");function d(){g()}function g(){var n=o.addMarkerSound(function(n,t,r){return n.brightnessIndex>=2&&(null==m||r<m.pos.y)});n.add(0,"synth_drum","major pentatonic","A",2,5,4),n.add(4,"synth_bass_2","major pentatonic","A",2,1,8),n.add(12,"melodic_tom","major pentatonic","A",4,5,2),n.add(14,"kalimba","major pentatonic","A",3,5,2);var t=o.addMarkerSound(function(n,t,r){return null!=m&&r>=m.pos.y&&3===n.colorIndex});t.add(0,"timpani","minor pentatonic","A",3,5,2),t.add(2,"synth_choir","minor pentatonic","A",3,1,12),t.add(14,"taiko_drum","minor pentatonic","A",3,5,2),o.addMarkerSound(function(n){return 6===n.colorIndex}).add(0,"pad_1_new_age","major pentatonic","A",4,1,16)}var l,f,m,v,y,b,h,k,x,_=[[4,1,27,"log",1.5],[3,-1,22,"log",1.1],[5,1,12,"log",1],[4,1,30,"log",1.4],[4,-1,20,"log",1.1],[0,0,0,"bank",0],[2,-1,40,"car",1.5],[1,1,8,"car",1],[1,-1,25,"car",1],[1,1,20,"car",1],[1,-1,30,"car",1]],A=new c.Random;function w(){k=1,x=2,M()}function M(){r.reset(),1===k?t=_:S(),x<2&&x++,y=!1,b=0,v=1,r.setBackground("gggggggggggggggg\nggg--gg--gg--ggg\n".concat(t.map(function(n){switch(n[3]){case"log":return"bbbbbbbbbbbbbbbb";case"car":return"----------------";case"bank":return"pppppppppppppppp"}}).join("\n"),"\npppppppppppppppp\npppppppppppppppp\npppppppppppppppp")),h=9999,a.addUpdater(function(n){for(var r=0;r<11;r++){var o=t[r];"bank"!==o[3]&&(l[r]-=v,l[r]<0&&(a.spawn(C,r+2,o[0],o[1],o[2],o[3]),l[r]+=A.getInt(100,150)*o[4]))}null==m&&h<0&&(m=a.spawn(G)),h--}),l=i.range(11).map(function(){return 0});for(var n=0;n<200;n++)a.update();"game"===r.scene&&I()}function S(){t=[];for(var n=A.get()<.5?"car":"log",r=A.getPlusOrMinus(),o=.8,e=0;e<11;e++){var a=1,p=0,s=1;switch(n){case"car":a=A.get()<.2?2:1,p=A.getInt(8,40),s*=Math.sqrt(p/1.5)/4*Math.sqrt(a);break;case"log":a=A.getInt(3,5),p=A.get(12,30),s*=Math.sqrt(p/1.5)/7*Math.sqrt(a)}t.push([a,r,p,n,s]),"bank"===n?n=A.get()<.5?"car":"log":A.get()<.1?n="bank":A.get()<.15&&(n="car"===n?"log":"car"),A.get()<o?(r*=-1,o=.8):o=1}}function j(){y=!0,b++,a.spawn(R)}function q(){I(),b>=3&&(k++,M()),v+=.2*Math.sqrt(k)}function I(){null!=m&&(m.remove(),m=void 0),h=100/v,y=!1,f=a.spawn(O);for(var n=0;n<x;n++){a.spawn(P).pos.set(9+2*n,13)}}function O(n){s.loadInstrument("pad_3_polysynth");var t=s.getNotes("major pentatonic","A",3,1,16);n.setPriority(.25),n.pos.set(7,13);var e=new u.Vector;n.onMove=function(a,p){if(!y){if(e.set(n.pos),n.pos.x+=a,n.pos.y+=p,n.pos.clamp(0,15,1,13),2===o.leds[n.pos.x][n.pos.y].colorIndex&&n.pos.set(e),1===n.pos.y){var s="".concat(r.background.substr(0,17+n.pos.x-1),"ggg").concat(r.background.substr(17+n.pos.x+2));r.setBackground(s),j()}o.scheduleSound("pad_3_polysynth",t[15-n.pos.y])}},n.addUpdater(function(){p.isJustPressed&&p.stick.length>0&&r.cursor.onClick(n.pos.x+p.stick.x,n.pos.y+p.stick.y);var t=o.leds[n.pos.x][n.pos.y];(null!=m&&n.pos.y>=m.pos.y||1===t.colorIndex||4===t.colorIndex)&&(a.spawn(U),n.remove(),f=void 0)})}function P(n){n.addUpdater(function(){n.ticks>120&&n.remove()})}function U(n){s.loadInstrument("lead_6_voice");var t=s.getNotes("minor pentatonic","A",2,1,16);n.setPriority(.25),n.str="w w\n w\nw w",n.pos.set(f.pos.x-1,f.pos.y-1),n.addUpdater(function(){n.brightness=3-Math.floor(n.ticks/8),n.ticks%3==0&&o.scheduleSound("lead_6_voice",t[15-n.ticks/3]),n.brightness<0&&(n.remove(),a.pool.get(P).forEach(function(n){n.remove()}),--x<0?r.startGameOver():I())})}function C(n,t,o,e,a,p){var s="log"===p?"y":"r";n.str=i.range(o).map(function(){return s}).join(""),n.pos.set(e>0?-n.str.length:16,t),n.addUpdater(function(){n.ticks>=a/v&&(n.ticks-=a/v,null!=f&&"log"===p&&f.pos.y===n.pos.y&&n.pos.x<=f.pos.x&&f.pos.x<n.pos.x+n.str.length&&(f.pos.x=i.clamp(f.pos.x+e,0,15)),n.pos.x+=e,(n.pos.x<=-n.str.length||n.pos.x>=16)&&n.remove()),"game"!==r.scene&&(n.brightness=1)})}function G(n){n.setPriority(.2),n.str=i.range(16).map(function(){return A.get()<.2?"y":"r"}).join(""),n.pos.y=15,n.addUpdater(function(){if(!y&&n.ticks>=100/v){var t=function(n){return"y"===r.charAt(n+1)?1:0};n.ticks-=100/v;var r="r".concat(n.str.substr(n.str.length-16),"r");n.str+="\n"+i.range(16).map(function(n){var r=t(n-1)<<2|t(n)<<1|t(n+1);return"ryyyyrrr".charAt(r)}).join(""),n.pos.y--}})}function R(n){n.setPriority(.1),n.str=i.range(16).map(function(){return A.get()<.2?"c":"b"}).join(""),n.pos.y=null==m?15:m.pos.y-1;var t=-1,o=a.spawn(e.text);o.pos.y=1;var p=0;n.addUpdater(function(){n.ticks>=4/v&&(n.ticks-=4/v,n.pos.y+=t,t<0?(n.str+="\n"+i.range(16).map(function(){return A.get()<.2?"c":"b"}).join(""),0===n.pos.y&&(t=1,b>=3&&(r.setBackground(i.range(16).map(function(){return i.range(16).map(function(){return"-"}).join("")}).join("\n")),a.pool.get(C).forEach(function(n){n.remove()}),l=i.range(11).map(function(){return 9999})),f.remove(),f=void 0),p+=b,r.addScore(b),o.setText("+".concat(p)),r.showScore()):(null!=m&&m.pos.y++,n.pos.y>15&&(q(),n.remove(),o.remove(),r.hideScore())))})}function D(){null!=m&&(m.remove(),m=void 0),h=9999999}function E(){k=1,h=9999999,M()}function B(n){if(null!=f&&f.pos.distanceTo(n)){var t=f.pos.getAngle(n),r=i.wrap(Math.round(t/(Math.PI/2)),0,4);f.onMove([1,0,-1,0][r],[0,1,0,-1][r])}}r.init({title:"XRD",description:"[uldr][WASD] KEY: MOVE\nCROSS A ROAD AND WALK ACROSS A LOG.",onInitialize:d,onStartingGame:w,onStartingGameOver:D,onStartingTitle:E,onClickCursor:B});
},{"../util/game":"Cmo+","../util/matrix":"40fr","../util/text":"/sou","../util/simpleGameActor":"yTBb","../util/keyboard":"+kme","../util/sound":"aHC3","../util/math":"pR4u","../util/random":"iXZc","../util/vector":"HIZ7"}]},{},["ZCfc"], null)